# AWS Snow Family & Storage Services

---

# AWS Snowball Overview

## What is AWS Snowball?

**AWS Snowball** is a **secure, portable device** for collecting and processing data at the edge, and for migrating data into and out of AWS. It supports migrations up to **petabytes** of data.

### Key Features:

- âœ… **Physical data transfer** device (offline migration)
- âœ… **Secure** (256-bit encryption, tamper-resistant)
- âœ… **Edge computing** capabilities
- âœ… **Scales to petabytes** of data
- âœ… **Bypasses network limitations**

---

# Device Specifications

## Two Types of Snowball Edge Devices

### 1. Snowball Edge Storage Optimized

**Designed for:** Large-scale data migrations and storage

**Specifications:**
- **Compute:** 104 vCPUs
- **Memory:** 416 GB RAM
- **Storage:** 210 TB SSD storage
- **Network:** 40 Gbps network
- **Use case:** Maximum storage capacity

### 2. Snowball Edge Compute Optimized

**Designed for:** Edge computing workloads

**Specifications:**
- **Compute:** 104 vCPUs
- **Memory:** 416 GB RAM
- **Storage:** 28 TB SSD storage
- **Network:** 40 Gbps network
- **GPU:** Optional GPU for ML/video processing
- **Use case:** Compute-intensive edge workloads

## Comparison Table

| Feature | Storage Optimized | Compute Optimized |
|---------|------------------|-------------------|
| **vCPUs** | 104 | 104 |
| **Memory** | 416 GB | 416 GB |
| **Storage** | 210 TB SSD | 28 TB SSD |
| **GPU** | No | Optional |
| **Priority** | Storage capacity | Compute power |
| **Best For** | Data migration | Edge computing |

**Summary:**
- **Storage Optimized** prioritizes capacity (210 TB)
- **Compute Optimized** emphasizes compute for edge workloads (with optional GPU)

---

# Data Migrations with Snowball

## The Problem: Network-Based Transfers

Large data transfers over networks can be **impractical** due to time and cost.

### Time to Transfer Table

**Transfer times for different data volumes and network speeds:**

| Data Volume | 100 Mbps | 1 Gbps | 10 Gbps |
|-------------|----------|---------|---------|
| **10 TB** | 12 days | 30 hours | 3 hours |
| **100 TB** | 124 days | 12 days | 30 hours |
| **1 PB** | 3 years | 124 days | 12 days |

**Observations:**
- Even with 1 Gbps, 1 PB takes **124 days** (4+ months)
- At 100 Mbps, 1 PB takes **3 years**!
- 10 Gbps is often unavailable or very expensive

### Challenges of Network-Based Data Migrations

âŒ **Limited connectivity:**
- Availability and reliability of network connections
- Not all locations have high-speed internet

âŒ **Limited bandwidth:**
- Insufficient transfer rates for large datasets
- Shared bandwidth with other applications

âŒ **High network cost:**
- Significant expenses, especially for egress
- Data transfer out of AWS/on-premises is expensive

âŒ **Shared bandwidth:**
- Cannot fully utilize the line due to shared usage
- Peak hours reduce available bandwidth

âŒ **Connection stability:**
- Interruptions and packet loss can delay or fail transfers
- Long transfers more likely to encounter issues

### Recommendation: When to Use Snowball

**Rule of Thumb:**

If a network transfer would take **more than a week**, use **Snowball devices**.

**Why?**
- Faster overall (including shipping)
- More reliable (no network interruptions)
- Cost-effective for large volumes
- No network bandwidth consumption

---

# Upload Methods Comparison

## Method 1: Direct Upload to S3

**Architecture:**

    Client
      |
      | Upload data
      | Over public internet
      | @ 10 Gbit/s (theoretical max)
      |
      v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    | Amazon S3      |
    | Bucket         |
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**Characteristics:**
- Depends on network bandwidth
- Depends on network stability
- Shared bandwidth with other traffic
- Data transfer costs
- Can be interrupted

**Best for:**
- Small data volumes (<10 TB)
- Good network connectivity
- Time-sensitive uploads (if network allows)

## Method 2: With Snowball

**Architecture:**

    Step 1: Data Transfer
    
    Client â”€â”€â”€â”€â–º Snowball Device
              (Local high-speed copy)
              (USB 3.0, 10GbE, etc.)
    
    Step 2: Physical Shipping
    
    Snowball Device â”€â”€â”€â”€â–º AWS Data Center
                (Shipped via carrier)
                (Tracked & secure)
    
    Step 3: Data Import
    
    AWS Data Center â”€â”€â”€â”€â–º Amazon S3 Bucket
                    (High-speed internal network)

**Process:**

1. **Order Snowball** device from AWS Console
2. **Receive device** (shipped to your location)
3. **Connect device** to your local network
4. **Copy data** to Snowball (local network speeds)
5. **Ship device** back to AWS
6. **AWS imports** data to S3
7. **Device wiped** and returned to pool

**Benefits:**
- âœ… Bypasses network limitations
- âœ… No network transfer costs
- âœ… Secure physical transport
- âœ… Predictable timeline
- âœ… No bandwidth consumption

**Timeline Example (1 PB):**
- Order device: 1 day
- Shipping to you: 2-3 days
- Local copy: 1-2 days (local network speeds)
- Return shipping: 2-3 days
- AWS import: 1-2 days
- **Total: ~1-2 weeks** vs. 124 days over 1 Gbps network!

---

# Edge Computing with Snowball Edge

## What is Edge Computing?

**Edge computing** processes data **at the source (edge location)** rather than sending it to a centralized data center first.

### Characteristics of Edge Locations

**Typical edge environments:**
- âŒ May have **limited internet connectivity** (or none)
- âŒ Often **lack access to computing power**
- âš ï¸ Remote and isolated

**Examples:**
- ğŸš› **Trucks on roads** (logistics, autonomous vehicles)
- ğŸš¢ **Ships at sea** (maritime operations)
- â›ï¸ **Underground mining stations** (resource extraction)
- ğŸ”ï¸ **Remote oil rigs** (energy exploration)
- ğŸ¬ **Film production sites** (media processing)
- ğŸ­ **Manufacturing floors** (IoT data processing)

## Solution: Snowball Edge

**Deploy Snowball Edge devices** at edge locations to provide:
- Local compute power
- Local storage
- Pre-processing capabilities
- Reduced data transfer needs

### Device Options for Edge Computing

#### Snowball Edge Compute Optimized
- **Designed for:** Compute-intensive tasks
- **104 vCPUs, 416 GB RAM**
- **Optional GPU** for ML inference
- **28 TB storage**

#### Snowball Edge Storage Optimized
- **Designed for:** Scenarios requiring significant storage
- **104 vCPUs, 416 GB RAM**
- **210 TB storage**
- Lighter compute, more storage

### Capabilities at the Edge

**Run compute workloads:**
- âœ… **EC2 instances** (AMI-compatible)
- âœ… **AWS Lambda functions** (serverless)
- âœ… **IoT Greengrass** (IoT edge runtime)

**Use Cases:**

#### 1. Preprocessing Data
- Filter and clean data locally
- Reduce data volume before cloud transfer
- Example: Video surveillance filtering relevant events

#### 2. Machine Learning Inference
- Run ML models locally on Snowball
- Real-time predictions without cloud latency
- Example: Quality inspection on manufacturing line

#### 3. Transcoding Media
- Convert video formats at edge
- Reduce bandwidth for cloud transfer
- Example: Film production dailies processing

#### 4. IoT Data Aggregation
- Collect and aggregate sensor data
- Send summaries instead of raw data
- Example: Oil rig sensor data processing

## Architecture: Edge Computing

    Edge Location (e.g., Ship at Sea)
    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    |                                    |
    |  IoT Sensors / Cameras             |
    |         â†“                          |
    |  Snowball Edge Device              |
    |   - Run EC2 Instances              |
    |   - Run Lambda Functions           |
    |   - Local Storage (28-210 TB)      |
    |   - Preprocessing                  |
    |         â†“                          |
    |  Processed Data (reduced volume)   |
    |                                    |
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   |
                   | When connectivity available
                   | (satellite, port arrival)
                   |
                   v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    |         AWS Cloud                  |
    |                                    |
    |  - Amazon S3 (storage)             |
    |  - Analytics services              |
    |  - ML model training               |
    |                                    |
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**Benefits:**
- âœ… Local compute without cloud connectivity
- âœ… Reduced data transfer (only processed results)
- âœ… Real-time processing and decisions
- âœ… Cost savings (less data transfer)

---

# Solution Architecture: Snowball into Glacier

## The Challenge

**Snowball cannot import directly to Amazon Glacier.**

**Why?** Glacier is an archival storage class, not a direct import target for Snowball.

## Solution: Use S3 as Intermediate Step

**Use S3 with Lifecycle Policy to transition to Glacier**

### Workflow

**Step-by-Step Process:**

    1. Import Data from Snowball
       â†“
    Snowball Device â”€â”€â–º Amazon S3 Bucket
                        (Initial import)
                        (S3 Standard by default)
    
    2. Configure S3 Lifecycle Policy
       â†“
    S3 Bucket Settings:
    - Lifecycle Rule: Transition to Glacier
    - Condition: Age > X days (e.g., 30 days)
    
    3. Automatic Transition
       â†“
    S3 Standard â”€â”€â”€â”€â”€â”€â–º Amazon S3 Glacier
                  (After 30 days)
                  (Automatic transition)

### Configuration Example

**S3 Lifecycle Policy:**

{
  "Rules": [
    {
      "Id": "Archive to Glacier",
      "Status": "Enabled",
      "Transitions": [
        {
          "Days": 30,
          "StorageClass": "GLACIER"
        }
      ]
    }
  ]
}**What happens:**
1. Data imported from Snowball â†’ S3 Standard
2. After 30 days â†’ Automatically transitions to Glacier
3. Long-term storage in Glacier (cost-effective)

### Architecture Diagram

    Snowball Device
         â†“
    [Data Import]
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Amazon S3 Bucket       â”‚
    â”‚  (S3 Standard)          â”‚
    â”‚                         â”‚
    â”‚  ğŸ“„ file1.dat           â”‚
    â”‚  ğŸ“„ file2.dat           â”‚
    â”‚  ğŸ“„ file3.dat           â”‚
    â”‚                         â”‚
    â”‚  S3 Lifecycle Policy:   â”‚
    â”‚  - Transition after 30d â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ (30 days later)
               â”‚ Automatic transition
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Amazon S3 Glacier      â”‚
    â”‚  (Archival Storage)     â”‚
    â”‚                         â”‚
    â”‚  ğŸ§Š file1.dat (frozen)  â”‚
    â”‚  ğŸ§Š file2.dat (frozen)  â”‚
    â”‚  ğŸ§Š file3.dat (frozen)  â”‚
    â”‚                         â”‚
    â”‚  Lower cost storage     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### Benefits

- âœ… **Cost-effective archival** (Glacier is ~$1/TB/month vs. S3 Standard ~$23/TB/month)
- âœ… **Automatic transition** (no manual intervention)
- âœ… **Enables Snowball â†’ Glacier** workflow
- âœ… **Flexible policies** (can transition to Glacier Deep Archive for even lower costs)

### Alternative Transitions

You can also transition to:
- **Glacier Instant Retrieval** (millisecond access, lower cost than S3)
- **Glacier Flexible Retrieval** (minutes to hours, very low cost)
- **Glacier Deep Archive** (12-48 hours, lowest cost: ~$0.99/TB/month)

**Best Practice:**
- Import to S3 Standard for immediate verification
- Set lifecycle policy for automatic archival
- Choose Glacier tier based on retrieval requirements

---

# Amazon FSx Overview

## What is Amazon FSx?

**Amazon FSx** is a **fully managed service** that lets you launch **third-party high-performance file systems** on AWS.

### Why FSx?

- âœ… **Fully managed** (AWS handles patching, backups, hardware)
- âœ… **High performance** (optimized for specific workloads)
- âœ… **Native compatibility** (works with existing applications)
- âœ… **Multiple file system types** (choose based on needs)

## Four FSx Offerings

### 1. FSx for Windows File Server
- **Type:** Fully managed Windows file system share drive
- **Protocol:** SMB
- **Best for:** Windows applications, Active Directory integration

### 2. FSx for Lustre
- **Type:** High-performance file system for compute-intensive workloads
- **Best for:** HPC, ML, media processing
- **Speed:** Sub-millisecond latencies

### 3. FSx for NetApp ONTAP
- **Type:** Managed NetApp ONTAP file system
- **Protocol:** NFS, SMB, iSCSI
- **Best for:** Enterprise applications, multi-protocol access

### 4. FSx for OpenZFS
- **Type:** Managed OpenZFS file system
- **Protocol:** NFS
- **Best for:** Linux workloads, high IOPS

---

# Amazon FSx for Windows File Server

## Overview

**FSx for Windows** is a **fully managed Windows file system share drive** running Windows Server.

### Key Features

#### Protocol & Compatibility

- âœ… **SMB protocol** (Server Message Block)
- âœ… **Windows NTFS** file system
- âœ… Can be **mounted on Linux EC2 instances** (SMB support)
- âœ… **Microsoft Active Directory integration**

#### Security & Access Control

- âœ… **ACLs** (Access Control Lists)
- âœ… **User quotas**
- âœ… **Supports Microsoft's Distributed File System (DFS) Namespaces**
  - Group files across multiple file systems
  - Single namespace for users

#### Performance

- âœ… Scales up to **tens of GB/s** throughput
- âœ… **Millions of IOPS**
- âœ… **Hundreds of petabytes** of storage

### Storage Options

#### SSD Storage
- **Use case:** Latency-sensitive workloads
- **Examples:**
  - Databases
  - Media processing
  - Data analytics
  - Home directories for users

#### HDD Storage
- **Use case:** Broad spectrum workloads
- **Examples:**
  - Home directories
  - Content Management Systems (CMS)
  - General file shares

### Additional Capabilities

#### Hybrid Cloud

**Can be accessed from on-premises infrastructure:**
- Via **VPN**
- Via **AWS Direct Connect**

**Use case:** Hybrid file sharing between cloud and on-premises

#### High Availability

- âœ… **Multi-AZ deployment** (active-passive)
- âœ… Automatic failover
- âœ… Synchronous replication

#### Backup & Recovery

- âœ… **Data backed up daily to S3** automatically
- âœ… Point-in-time recovery
- âœ… User-initiated backups

## Architecture Diagram

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    |              AWS Cloud                          |
    |                                                 |
    |   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    |
    |   |  VPC                                  |    |
    |   |                                       |    |
    |   |  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    |    |
    |   |  | Amazon FSx for Windows       |    |    |
    |   |  |                              |    |    |
    |   |  | - SMB Protocol               |    |    |
    |   |  | - Active Directory           |    |    |
    |   |  | - Multi-AZ (HA)              |    |    |
    |   |  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    |    |
    |   |              |                       |    |
    |   |              â†“                       |    |
    |   |  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            |    |
    |   |  | EC2 Instances       |            |    |
    |   |  | (Windows/Linux)     |            |    |
    |   |  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            |    |
    |   |                                       |    |
    |   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    |
    |                                                 |
    |   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             |
    |   | Amazon S3    | â—„â”€â”€â”€ Daily backups          |
    |   | (Backups)    |                             |
    |   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             |
    |                                                 |
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    |
                    | VPN / Direct Connect
                    |
                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    | On-Premises Data Center          |
    |                                  |
    | - Windows Servers                |
    | - User Workstations              |
    | - Access via SMB                 |
    |                                  |
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**Use Cases:**
1. **Windows application file shares**
2. **Home directories** for users
3. **CMS and web serving**
4. **SQL Server databases** (shared storage)
5. **Hybrid file sharing** (cloud + on-premises)

---

# Amazon FSx for Lustre

## What is Lustre?

**Lustre** is a **parallel distributed file system** for large-scale computing.

**Name origin:** "**Lu**stre" = "**L**inux" + "cl**uster**"

### Key Characteristics

- âš¡ **Parallel I/O** (multiple servers process simultaneously)
- âš¡ **Distributed** (data spread across multiple servers)
- âš¡ **High performance** (optimized for large-scale compute)

## Use Cases

### 1. Machine Learning (ML)
- Training datasets
- Model checkpoints
- Distributed training workloads

### 2. High Performance Computing (HPC)
- Scientific simulations
- Weather modeling
- Genomics analysis

### 3. Video Processing
- Rendering
- Transcoding
- Post-production workflows

### 4. Financial Modeling
- Risk analysis
- Trading algorithms
- Monte Carlo simulations

### 5. Electronic Design Automation (EDA)
- Chip design
- Circuit simulation
- Verification workloads

## Performance

**Exceptional performance metrics:**

- âœ… Scales up to **hundreds of GB/s** throughput
- âœ… **Millions of IOPS**
- âœ… **Sub-millisecond latencies** (< 1ms)

**Why so fast?**
- Parallel architecture
- SSD-based storage options
- Optimized for sequential and random I/O

## Storage Options

### SSD Storage
- **Use case:** Low-latency and IOPS-intensive workloads
- **Optimized for:** Small, random file operations
- **Examples:**
  - Database workloads
  - Real-time analytics
  - Interactive applications

### HDD Storage
- **Use case:** Throughput-intensive workloads
- **Optimized for:** Large, sequential file operations
- **Examples:**
  - Log processing
  - Large dataset processing
  - Archival data access

## S3 Integration

**Seamless integration with Amazon S3:**

### Read from S3
- âœ… **Can read S3 as if it were a file system** through FSx
- Objects in S3 appear as files
- Transparent access (applications don't know it's S3)

### Write to S3
- âœ… **Can write computation outputs back to S3** through FSx
- Results automatically synced to S3
- Durable storage for outputs

**Architecture:**

    S3 Bucket (Input Data)
         â†“
    [Seamless Integration]
         â†“
    FSx for Lustre
    (File System Interface)
         â†“
    Compute Instances
    (HPC Cluster)
         â†“
    FSx for Lustre
    (Results)
         â†“
    [Seamless Integration]
         â†“
    S3 Bucket (Output Data)

**Benefits:**
- Use S3 for durable storage
- Use FSx for high-performance compute
- No manual data movement needed

## On-Premises Access

**Can be accessed from on-premises:**
- âœ… Via **VPN**
- âœ… Via **AWS Direct Connect**

**Use case:** Hybrid HPC workloads (on-premises + cloud burst)

---

# FSx for Lustre - File System Deployment Options

## Two Deployment Types

### 1. Scratch File System

**Purpose:** Temporary storage for short-term processing

#### Characteristics

- âš ï¸ **Data is NOT replicated** (no redundancy)
- âš¡ **High burst performance:** 6x faster than persistent
- ğŸ’° **Cost-optimized** (lower cost than persistent)
- â±ï¸ **Temporary** (data can be lost on hardware failure)
- ğŸ“Š **200 MBps per TiB baseline throughput**

#### When to Use

âœ… **Best for:**
- Short-term processing tasks
- Temporary scratch space
- Data that can be recreated
- Cost-sensitive workloads
- When data durability is not critical

âŒ **NOT suitable for:**
- Long-term storage
- Critical data
- Data that cannot be recreated

#### Architecture Diagram (Scratch)

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         AWS Cloud                               â”‚
    â”‚                                                 â”‚
    â”‚   Availability Zone 1      Availability Zone 2 â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚  Compute     â”‚         â”‚  Compute     â”‚   â”‚
    â”‚   â”‚  Instances   â”‚         â”‚  Instances   â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚           â”‚                        â”‚           â”‚
    â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
    â”‚                        â”‚                       â”‚
    â”‚                        â–¼                       â”‚
    â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚               â”‚      ENI       â”‚               â”‚
    â”‚               â”‚  (Network      â”‚               â”‚
    â”‚               â”‚   Interface)   â”‚               â”‚
    â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
    â”‚                        â”‚                       â”‚
    â”‚                        â–¼                       â”‚
    â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚        â”‚  FSx for Lustre (Scratch)    â”‚       â”‚
    â”‚        â”‚                              â”‚       â”‚
    â”‚        â”‚  ğŸ’¾ Single Copy              â”‚       â”‚
    â”‚        â”‚  âš ï¸  NO Replication          â”‚       â”‚
    â”‚        â”‚  âš¡ 6x Faster                â”‚       â”‚
    â”‚        â”‚  ğŸ’° Lower Cost               â”‚       â”‚
    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚                       â”‚                       â”‚
    â”‚                       â”‚ (Optional)            â”‚
    â”‚                       â†“                       â”‚
    â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
    â”‚               â”‚  S3 Bucket   â”‚                â”‚
    â”‚               â”‚ (Data Repo)  â”‚                â”‚
    â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
    â”‚                                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

### 2. Persistent File System

**Purpose:** Long-term storage with data replication

#### Characteristics

- âœ… **Data IS replicated** within the same Availability Zone
- âš¡ **Fast recovery:** failed files replaced within minutes
- ğŸ’¾ **Long-term storage** (data persists)
- ğŸ”’ **Data integrity** (redundancy protects against hardware failure)
- ğŸ“Š **Baseline throughput** (not as fast as scratch, but still high performance)

#### When to Use

âœ… **Best for:**
- Long-term processing and storage
- Sensitive data requiring protection
- Production workloads
- Data that must be preserved
- Critical applications

âŒ **NOT suitable for:**
- Temporary workloads (use scratch instead for cost savings)

#### Architecture Diagram (Persistent)

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         AWS Cloud                               â”‚
    â”‚                                                 â”‚
    â”‚   Availability Zone 1      Availability Zone 2 â”‚
    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚   â”‚  Compute     â”‚         â”‚  Compute     â”‚   â”‚
    â”‚   â”‚  Instances   â”‚         â”‚  Instances   â”‚   â”‚
    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚           â”‚                        â”‚           â”‚
    â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
    â”‚                        â”‚                       â”‚
    â”‚                        â–¼                       â”‚
    â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚               â”‚      ENI       â”‚               â”‚
    â”‚               â”‚  (Network      â”‚               â”‚
    â”‚               â”‚   Interface)   â”‚               â”‚
    â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
    â”‚                        â”‚                       â”‚
    â”‚                        â–¼                       â”‚
    â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚        â”‚ FSx for Lustre (Persistent)  â”‚       â”‚
    â”‚        â”‚                              â”‚       â”‚
    â”‚        â”‚  ğŸ’¾ Primary Copy             â”‚       â”‚
    â”‚        â”‚       â†•ï¸                      â”‚       â”‚
    â”‚        â”‚  ğŸ’¾ Replica Copy             â”‚       â”‚
    â”‚        â”‚  âœ… Replication (same AZ)    â”‚       â”‚
    â”‚        â”‚  ğŸ”’ Data Protected           â”‚       â”‚
    â”‚        â”‚  â±ï¸  Fast Recovery           â”‚       â”‚
    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚                       â”‚                       â”‚
    â”‚                       â”‚ (Optional)            â”‚
    â”‚                       â†“                       â”‚
    â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
    â”‚               â”‚  S3 Bucket   â”‚                â”‚
    â”‚               â”‚ (Data Repo)  â”‚                â”‚
    â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
    â”‚                                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Comparison Table

| Feature | Scratch File System | Persistent File System |
|---------|-------------------|------------------------|
| **Replication** | NO | YES (within same AZ) |
| **Performance** | 6x faster (200 MBps/TiB) | High (standard throughput) |
| **Cost** | Lower | Higher |
| **Data Durability** | Not guaranteed | Guaranteed |
| **Recovery** | No recovery | Minutes (automatic) |
| **Use Case** | Temporary processing | Long-term storage |
| **Best For** | Cost-sensitive, short-term | Production, critical data |
| **Data Loss Risk** | Hardware failure = data loss | Protected against failure |

## Decision Guide

**Choose Scratch if:**
- Processing job < 1 week
- Data can be recreated from S3
- Cost is critical
- Maximum performance needed

**Choose Persistent if:**
- Long-running workloads
- Critical data
- Cannot afford data loss
- Production environments

---

# Amazon FSx for NetApp ONTAP

## Overview

**FSx for NetApp ONTAP** provides **managed NetApp ONTAP** on AWS.

### What is NetApp ONTAP?

NetApp ONTAP is an **enterprise-grade storage operating system** with advanced data management features.

## Key Features

### Protocol Support

- âœ… **NFS** (Network File System) - Linux/Unix
- âœ… **SMB** (Server Message Block) - Windows
- âœ… **iSCSI** (Internet Small Computer Systems Interface) - Block storage

**Benefit:** Multi-protocol access from single file system

### Workload Migration

- âœ… **Move workloads running on ONTAP or NAS to AWS**
- âœ… Lift-and-shift with minimal changes
- âœ… Compatible with existing ONTAP configurations

### Broad Compatibility

**Works with:**
- âœ… **Linux, Windows, macOS**
- âœ… **VMware Cloud on AWS**
- âœ… **Amazon WorkSpaces** (virtual desktops)
- âœ… **Amazon AppStream 2.0** (application streaming)
- âœ… **Amazon EC2** (compute instances)
- âœ… **Amazon ECS** (containers)
- âœ… **Amazon EKS** (Kubernetes)

### Storage Features

#### Auto-Scaling

- âœ… **Storage shrinks or grows automatically**
- Pay only for what you use
- No manual capacity planning

#### Data Management

- âœ… **Snapshots** (point-in-time copies)
- âœ… **Replication** (cross-region, cross-account)
- âœ… **Low-cost storage** (tiering to capacity pool)
- âœ… **Compression** (reduce storage costs)
- âœ… **Data deduplication** (eliminate duplicates)

#### Cloning

- âœ… **Point-in-time instantaneous cloning**
- âœ… Helpful for **testing new workloads**
- âœ… Zero-copy clones (space-efficient)

## Architecture Diagram

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            Amazon FSx for NetApp ONTAP FS              â”‚
    â”‚                                                        â”‚
    â”‚  - Multi-Protocol (NFS, SMB, iSCSI)                   â”‚
    â”‚  - Auto-Scaling Storage                               â”‚
    â”‚  - Snapshots & Replication                            â”‚
    â”‚  - Compression & Deduplication                        â”‚
    â”‚                                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        |
                        | NFS, SMB, iSCSI
                        |
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        |                               |
        v                               v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Compatible Clients                            â”‚
    â”‚                                                       â”‚
    â”‚  AWS Compute Services:                                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚  â”‚ EC2  â”‚  â”‚ ECS  â”‚  â”‚ EKS  â”‚                       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                       â”‚
    â”‚                                                       â”‚
    â”‚  Operating Systems:                                   â”‚
    â”‚  ğŸ§ Linux    ğŸªŸ Windows    ğŸ macOS                  â”‚
    â”‚                                                       â”‚
    â”‚  AWS Services:                                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
    â”‚  â”‚ VMware Cloud â”‚  â”‚ AppStream 2.0â”‚                 â”‚
    â”‚  â”‚   on AWS     â”‚  â”‚              â”‚                 â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
    â”‚  â”‚ WorkSpaces   â”‚                                    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
    â”‚                                                       â”‚
    â”‚  On-Premises:                                         â”‚
    â”‚  ğŸ¢ On-Premises Servers (via VPN/Direct Connect)     â”‚
    â”‚                                                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Use Cases

### 1. Enterprise File Sharing
- Shared storage for Windows and Linux servers
- Home directories
- Department shares

### 2. Database Storage
- Oracle, SQL Server, MySQL
- iSCSI block storage for databases

### 3. VMware Cloud on AWS
- Datastore for virtual machines
- vSphere integration

### 4. Hybrid Cloud
- Extend on-premises ONTAP to AWS
- Seamless data migration

### 5. Development & Test
- Clone production data instantly
- Test without impacting production
- Space-efficient clones

---

# Amazon FSx for OpenZFS

## Overview

**FSx for OpenZFS** provides a **managed OpenZFS file system** on AWS.

### What is OpenZFS?

OpenZFS is an **open-source file system** known for data integrity, high performance, and advanced features.

## Key Features

### Protocol Support

- âœ… **NFS v3**
- âœ… **NFS v4**
- âœ… **NFS v4.1**
- âœ… **NFS v4.2**

**Note:** Primarily for Linux/Unix environments

### Workload Migration

- âœ… **Move workloads running on ZFS to AWS**
- âœ… Lift-and-shift with minimal changes
- âœ… Compatible with existing ZFS configurations

### Broad Compatibility

**Works with:**
- âœ… **Linux, Windows, macOS**
- âœ… **VMware Cloud on AWS**
- âœ… **Amazon WorkSpaces** (virtual desktops)
- âœ… **Amazon AppStream 2.0** (application streaming)
- âœ… **Amazon EC2** (compute instances)
- âœ… **Amazon ECS** (containers)
- âœ… **Amazon EKS** (Kubernetes)

### Performance

- âœ… **Up to 1,000,000 IOPS** (1 million!)
- âœ… **< 0.5ms latency** (sub-millisecond)
- âœ… Excellent for high-performance workloads

### Storage Features

#### Snapshots

- âœ… **Snapshots** (point-in-time copies)
- âœ… Space-efficient
- âœ… Quick recovery

#### Compression

- âœ… **Compression** (reduce storage costs)
- âœ… Transparent to applications
- âœ… Configurable compression levels

#### Cloning

- âœ… **Point-in-time instantaneous cloning**
- âœ… Helpful for **testing new workloads**
- âœ… Zero-copy clones (space-efficient)

#### Cost Optimization

- âœ… **Low-cost storage** options
- âœ… Compression reduces costs
- âœ… Thin provisioning

## Architecture Diagram

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            Amazon FSx for OpenZFS                      â”‚
    â”‚                                                        â”‚
    â”‚  - NFS (v3, v4, v4.1, v4.2)                           â”‚
    â”‚  - 1,000,000 IOPS                                     â”‚
    â”‚  - < 0.5ms latency                                    â”‚
    â”‚  - Snapshots & Compression                            â”‚
    â”‚  - Instant Cloning                                    â”‚
    â”‚                                                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        |
                        | NFS (v3, v4, v4.1, v4.2)
                        |
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        |                               |
        v                               v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Compatible Clients                            â”‚
    â”‚                                                       â”‚
    â”‚  AWS Compute Services:                                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”                       â”‚
    â”‚  â”‚ EC2  â”‚  â”‚ ECS  â”‚  â”‚ EKS  â”‚                       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜                       â”‚
    â”‚                                                       â”‚
    â”‚  Operating Systems:                                   â”‚
    â”‚  ğŸ§ Linux    ğŸªŸ Windows    ğŸ macOS                  â”‚
    â”‚                                                       â”‚
    â”‚  AWS Services:                                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
    â”‚  â”‚ VMware Cloud â”‚  â”‚ AppStream 2.0â”‚                 â”‚
    â”‚  â”‚   on AWS     â”‚  â”‚              â”‚                 â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
    â”‚  â”‚ WorkSpaces   â”‚                                    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
    â”‚                                                       â”‚
    â”‚  On-Premises:                                         â”‚
    â”‚  ğŸ¢ On-Premises Servers (via VPN/Direct Connect)     â”‚
    â”‚                                                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Use Cases

### 1. High-Performance Databases
- MySQL, PostgreSQL, Oracle
- Low latency requirements
- High IOPS workloads

### 2. Media & Entertainment
- Video editing
- Rendering farms
- Post-production workflows

### 3. Development & Test
- Clone production environments instantly
- Test without impacting production
- Space-efficient testing

### 4. Analytics Workloads
- Big data analytics
- Real-time data processing
- Log analysis

### 5. Migrate ZFS Workloads
- Lift-and-shift existing ZFS systems
- Maintain compatibility
- Reduce on-premises footprint

---

# Hybrid Cloud for Storage

## What is Hybrid Cloud?

AWS promotes **"hybrid cloud"** where resources span **public cloud (AWS)** and **on-premises data centers**.

### Reasons for Hybrid Cloud

#### 1. Long Cloud Migrations
- âœ… Gradual migration to cloud
- âœ… Phase-out on-premises over time
- âœ… Minimize disruption

#### 2. Security Requirements
- âœ… Keep sensitive data on-premises
- âœ… Burst to cloud for additional capacity
- âœ… Meet regulatory needs

#### 3. Compliance Requirements
- âœ… Data residency requirements
- âœ… Specific industry regulations
- âœ… Audit and governance needs

#### 4. IT Strategy
- âœ… Best of both worlds
- âœ… Leverage existing investments
- âœ… Flexible architecture

## The S3 Challenge

**Problem:**
- S3 is **proprietary** to AWS (not standard like EFS/NFS)
- Exposing S3 data on-premises requires a solution
- Cannot directly mount S3 like a file system

**Solution:** **AWS Storage Gateway**

---

# AWS Storage Cloud Native Options

## Block Storage

### Amazon EBS (Elastic Block Store)
- **Type:** Persistent block storage volumes
- **Use case:** EC2 instance storage
- **Characteristics:** Network-attached, persistent, snapshots

### EC2 Instance Store
- **Type:** Temporary block storage
- **Use case:** High IOPS, ephemeral storage
- **Characteristics:** Physically attached to host, lost on stop/termination

## File Storage

### Amazon EFS (Elastic File System)
- **Type:** Scalable, elastic file storage
- **Protocol:** NFS (Network File System)
- **Use case:** Shared file storage for Linux
- **Characteristics:** POSIX-compliant, scalable, multi-AZ

### Amazon FSx
- **Type:** Managed file systems
- **Options:**
  - **FSx for Windows** (SMB, Active Directory)
  - **FSx for Lustre** (HPC, ML)
  - **FSx for NetApp ONTAP** (Multi-protocol)
  - **FSx for OpenZFS** (High IOPS, NFS)

## Object Storage

### Amazon S3
- **Type:** Scalable object storage
- **Use case:** General-purpose storage
- **Characteristics:** Highly durable, versioning, lifecycle policies

### Amazon S3 Glacier
- **Type:** Low-cost archival storage
- **Options:**
  - Glacier Instant Retrieval
  - Glacier Flexible Retrieval
  - Glacier Deep Archive
- **Characteristics:** Very low cost, retrieval times vary

---

# AWS Storage Gateway

## Overview

**AWS Storage Gateway** bridges **on-premises data** and **AWS cloud storage**.

### What It Does

Acts as a **hybrid storage** service connecting on-premises environments to AWS cloud storage.

## Use Cases

### 1. Disaster Recovery
- Replicate on-premises data to AWS
- Quick recovery from cloud
- Cost-effective backup solution

### 2. Backup & Restore
- Backup on-premises data to S3/Glacier
- Restore when needed
- Replace physical tape libraries

### 3. Tiered Storage
- Frequently accessed data on-premises
- Archive cold data to AWS
- Optimize storage costs

### 4. On-Premises Cache and Low-Latency File Access
- Local cache for frequently accessed data
- Full dataset in AWS
- Fast local access with cloud durability

## Types of Storage Gateway

### 1. S3 File Gateway
- **Interface:** File-based (NFS/SMB)
- **Backend:** Amazon S3
- **Use case:** File shares backed by S3

### 2. Volume Gateway
- **Interface:** Block storage (iSCSI)
- **Backend:** Amazon S3 (with EBS snapshots)
- **Types:**
  - **Cached volumes:** Most recent data cached locally
  - **Stored volumes:** Entire dataset on-premises, backed up to S3
- **Use case:** Block storage for applications/databases

### 3. Tape Gateway
- **Interface:** Virtual Tape Library (VTL)
- **Backend:** Amazon S3 / Glacier
- **Use case:** Replace physical tape backup infrastructure

## General Architecture

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   On-Premises              â”‚
    â”‚   (Corporate Data Center)  â”‚
    â”‚                            â”‚
    â”‚   Application Servers      â”‚
    â”‚   Backup Servers           â”‚
    â”‚          â†“                 â”‚
    â”‚   Storage Gateway          â”‚
    â”‚   (VM on VMware/Hyper-V)   â”‚
    â”‚                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               |
               | HTTPS
               | (Encrypted)
               |
               v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      AWS Cloud           â”‚
    â”‚                          â”‚
    â”‚   - Amazon S3            â”‚
    â”‚   - Amazon S3 Glacier    â”‚
    â”‚   - Amazon EBS Snapshots â”‚
    â”‚                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**Key Points:**
- âœ… Deployed as **VM on-premises** (VMware, Hyper-V, KVM)
- âœ… **HTTPS encryption** in transit
- âœ… **Local cache** for low-latency access
- âœ… **Async replication** to AWS

---

# Amazon S3 File Gateway

## Overview

**S3 File Gateway** provides **file-based access** to Amazon S3 using standard protocols (NFS/SMB).

### How It Works

- âœ… **Configured S3 buckets** accessible via NFS and SMB protocols
- âœ… **Most recently used data** cached locally on the gateway
- âœ… Files stored as **objects in S3**
- âœ… Transparent to applications (looks like a normal file share)

## Supported S3 Storage Classes

**Can use:**
- âœ… S3 Standard
- âœ… S3 Standard-IA (Infrequent Access)
- âœ… S3 One Zone-IA
- âœ… S3 Intelligent-Tiering

**Transition to Glacier:**
- âœ… Data transitions to **S3 Glacier** via **lifecycle policies**
- Automatic archival of old data

## Security & Access

### IAM Roles
- âœ… **Bucket access uses IAM roles** per File Gateway
- Each gateway has its own role
- Fine-grained permissions

### Active Directory Integration
- âœ… **SMB integrates with Active Directory** for authentication
- User-based access control
- Windows-compatible permissions

## Architecture

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Corporate Data Center              â”‚
    â”‚                                     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚  â”‚ Application      â”‚               â”‚
    â”‚  â”‚ Server           â”‚               â”‚
    â”‚  â”‚                  â”‚               â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
    â”‚           â”‚                         â”‚
    â”‚           â”‚ NFS / SMB               â”‚
    â”‚           â”‚                         â”‚
    â”‚           v                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚  â”‚ S3 File Gateway  â”‚               â”‚
    â”‚  â”‚                  â”‚               â”‚
    â”‚  â”‚ - Local Cache    â”‚               â”‚
    â”‚  â”‚ - NFS/SMB Server â”‚               â”‚
    â”‚  â”‚                  â”‚               â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
    â”‚           â”‚                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ HTTPS
                â”‚ (Encrypted)
                â”‚
                v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         AWS Cloud                     â”‚
    â”‚                                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Amazon S3                       â”‚  â”‚
    â”‚  â”‚                                 â”‚  â”‚
    â”‚  â”‚ - S3 Standard                   â”‚  â”‚
    â”‚  â”‚ - S3 Standard-IA                â”‚  â”‚
    â”‚  â”‚ - S3 One Zone-IA                â”‚  â”‚
    â”‚  â”‚ - S3 Intelligent-Tiering        â”‚  â”‚
    â”‚  â”‚                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚             â”‚                         â”‚
    â”‚             â”‚ Lifecycle Policy        â”‚
    â”‚             â”‚                         â”‚
    â”‚             v                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Amazon S3 Glacier               â”‚  â”‚
    â”‚  â”‚ (Archival Storage)              â”‚  â”‚
    â”‚  â”‚                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Use Cases

### 1. File Shares
- Replace traditional NAS/file servers
- Unlimited capacity (backed by S3)
- Pay for what you use

### 2. Backup to Cloud
- Backup files to S3
- Automatic archival to Glacier
- Cost-effective long-term retention

### 3. Hybrid File Sharing
- Local cache for fast access
- Full dataset in S3
- Access from cloud and on-premises

### 4. Data Migration
- Gradual migration to cloud
- Keep working while migrating
- Transparent to users

---

# Volume Gateway

## Overview

**Volume Gateway** provides **block storage** via iSCSI protocol, backed by Amazon S3.

### Key Features

- âœ… **Block storage** (iSCSI protocol)
- âœ… **Backed by S3** (durable, scalable)
- âœ… **Backed by EBS snapshots** for on-premises volume restore
- âœ… Two modes: Cached and Stored

## Two Volume Types

### 1. Cached Volumes

**How it works:**
- **Most recent data** cached locally
- **Full dataset** stored in S3
- Low-latency access to frequently used data

**Characteristics:**
- âœ… Minimize on-premises storage needs
- âœ… Quick access to hot data
- âœ… All data backed up to S3

**Use case:**
- Limited on-premises storage
- Expand storage capacity
- Primary data in cloud

### 2. Stored Volumes

**How it works:**
- **Entire dataset** stored on-premises
- **Scheduled backups** to S3 (async)
- Full dataset locally for performance

**Characteristics:**
- âœ… Full dataset on-premises (low latency)
- âœ… Point-in-time backups to S3
- âœ… Disaster recovery via S3/EBS snapshots

**Use case:**
- Need full dataset on-premises
- Low-latency access to all data
- S3 for backup/DR only

## Architecture

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Corporate Data Center              â”‚
    â”‚                                     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚  â”‚ Application      â”‚               â”‚
    â”‚  â”‚ Server           â”‚               â”‚
    â”‚  â”‚ (Database, VM,   â”‚               â”‚
    â”‚  â”‚  etc.)           â”‚               â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
    â”‚           â”‚                         â”‚
    â”‚           â”‚ iSCSI                   â”‚
    â”‚           â”‚                         â”‚
    â”‚           v                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
    â”‚  â”‚ Volume Gateway   â”‚               â”‚
    â”‚  â”‚                  â”‚               â”‚
    â”‚  â”‚ - iSCSI Target   â”‚               â”‚
    â”‚  â”‚ - Local Cache/   â”‚               â”‚
    â”‚  â”‚   Storage        â”‚               â”‚
    â”‚  â”‚                  â”‚               â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
    â”‚           â”‚                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ HTTPS
                â”‚ (Encrypted)
                â”‚
                v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         AWS Cloud                     â”‚
    â”‚                                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Amazon S3                       â”‚  â”‚
    â”‚  â”‚                                 â”‚  â”‚
    â”‚  â”‚ - Volume data                   â”‚  â”‚
    â”‚  â”‚ - Point-in-time snapshots       â”‚  â”‚
    â”‚  â”‚                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚             â”‚                         â”‚
    â”‚             â”‚ Create snapshots        â”‚
    â”‚             â”‚                         â”‚
    â”‚             v                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Amazon EBS Snapshots            â”‚  â”‚
    â”‚  â”‚                                 â”‚  â”‚
    â”‚  â”‚ - Restore volumes               â”‚  â”‚
    â”‚  â”‚ - Create EBS volumes            â”‚  â”‚
    â”‚  â”‚ - Disaster recovery             â”‚  â”‚
    â”‚  â”‚                                 â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Use Cases

### 1. Database Backup
- iSCSI volumes for databases
- Automatic backup to S3
- Point-in-time recovery

### 2. Virtual Machine Storage
- VMware/Hyper-V datastores
- Backup VM volumes to S3
- Disaster recovery to EC2

### 3. Application Storage
- Block storage for applications
- S3 backup for durability
- EBS snapshot integration

---

# Tape Gateway

## Overview

**Tape Gateway** enables existing **tape-based backup processes** while storing data in the cloud.

### The Problem

- Many companies still use **physical tapes** for backup
- Tape infrastructure is expensive
- Tape management is complex
- Physical tapes can be lost or damaged

### The Solution

**Tape Gateway** provides a **Virtual Tape Library (VTL)** backed by S3 and Glacier.

## How It Works

### Virtual Tape Library (VTL)

- âœ… **iSCSI-based VTL** interface
- âœ… **Backed by S3 and Glacier**
- âœ… Works with **existing backup software** (Veeam, Veritas, CommVault, etc.)
- âœ… **No changes** to backup workflows

### Storage Tiers

**Virtual Tape Shelf (Active Tapes):**
- Stored in **Amazon S3**
- Instant access for restore
- Used for recent backups

**Virtual Tape Archive (Archived Tapes):**
- Stored in **Amazon S3 Glacier** or **Glacier Deep Archive**
- Lower cost for long-term retention
- Minutes to hours retrieval

## Architecture

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Corporate Data Center                  â”‚
    â”‚                                         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
    â”‚  â”‚ Backup Server    â”‚                   â”‚
    â”‚  â”‚ (Veeam, Veritas, â”‚                   â”‚
    â”‚  â”‚  CommVault, etc.)â”‚                   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
    â”‚           â”‚                             â”‚
    â”‚           â”‚ iSCSI                       â”‚
    â”‚           â”‚                             â”‚
    â”‚           v                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
    â”‚  â”‚ Media Changer & Tape Drive   â”‚       â”‚
    â”‚  â”‚ (Virtual)                    â”‚       â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
    â”‚           â”‚                             â”‚
    â”‚           v                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
    â”‚  â”‚ Tape Gateway     â”‚                   â”‚
    â”‚  â”‚                  â”‚                   â”‚
    â”‚  â”‚ - VTL Interface  â”‚                   â”‚
    â”‚  â”‚ - iSCSI Target   â”‚                   â”‚
    â”‚  â”‚ - Local Cache    â”‚                   â”‚
    â”‚  â”‚                  â”‚                   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
    â”‚           â”‚                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ HTTPS
                â”‚ (Encrypted)
                â”‚
                v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         AWS Cloud                           â”‚
    â”‚                                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Virtual Tapes (Active)                â”‚  â”‚
    â”‚  â”‚ Stored in Amazon S3                   â”‚  â”‚
    â”‚  â”‚                                       â”‚  â”‚
    â”‚  â”‚ - Recent backups                      â”‚  â”‚
    â”‚  â”‚ - Instant access                      â”‚  â”‚
    â”‚  â”‚                                       â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚             â”‚                               â”‚
    â”‚             â”‚ Archive older tapes           â”‚
    â”‚             â”‚                               â”‚
    â”‚             v                               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ Virtual Tapes (Archived)              â”‚  â”‚
    â”‚  â”‚ Stored in Amazon S3 Glacier           â”‚  â”‚
    â”‚  â”‚                                       â”‚  â”‚
    â”‚  â”‚ - Long-term retention                 â”‚  â”‚
    â”‚  â”‚ - Lower cost                          â”‚  â”‚
    â”‚  â”‚ - Minutes to hours retrieval          â”‚  â”‚
    â”‚  â”‚                                       â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Use Cases

### 1. Replace Physical Tapes
- Eliminate physical tape management
- No tape rotation needed
- No offsite storage costs

### 2. Long-Term Retention
- Compliance requirements (7+ years)
- Legal hold requirements
- Archive to Glacier Deep Archive (lowest cost)

### 3. Disaster Recovery
- Cloud-based backup
- Quick restore to cloud or on-premises
- No risk of physical tape loss

## Supported Backup Software

**Works with leading vendors:**
- Veeam Backup & Replication
- Veritas NetBackup
- CommVault
- IBM Spectrum Protect
- Microsoft System Center Data Protection Manager
- And many more...

---

# AWS Storage Gateway - Complete Architecture

## Gateway Deployment Options

**Storage Gateway can be deployed as:**
- âœ… **VM on VMware** (ESXi)
- âœ… **VM on Hyper-V** (Windows Server)
- âœ… **VM on KVM** (Linux)
- âœ… **Hardware appliance** (physical device from AWS)

## Complete Architecture Overview

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         On-Premises (Corporate Data Center)          â”‚
    â”‚                                                      â”‚
    â”‚  File Shares (NFS/SMB)                               â”‚
    â”‚  - User/group shares â”€â”€â”€â”€â”€â”€â–º S3 File Gateway         â”‚
    â”‚                               â”‚                      â”‚
    â”‚                               â”‚ Local Cache          â”‚
    â”‚                               â”‚                      â”‚
    â”‚  Application Server (iSCSI)                          â”‚
    â”‚  - Databases, VMs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Volume Gateway         â”‚
    â”‚                               â”‚                      â”‚
    â”‚                               â”‚ Local Cache/Storage  â”‚
    â”‚                               â”‚                      â”‚
    â”‚  Backup Application (iSCSI VTL)                      â”‚
    â”‚  - Tape backup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Tape Gateway           â”‚
    â”‚                               â”‚                      â”‚
    â”‚                               â”‚ Local Cache          â”‚
    â”‚                               â”‚                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Internet or
                                    â”‚ Direct Connect
                                    â”‚ (Encrypted HTTPS)
                                    â”‚
                                    v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              AWS Cloud Integration                   â”‚
    â”‚                                                      â”‚
    â”‚  S3 File Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Amazon S3              â”‚
    â”‚                               â”œâ”€ S3 Standard         â”‚
    â”‚                               â”œâ”€ S3 Standard-IA      â”‚
    â”‚                               â”œâ”€ S3 One Zone-IA      â”‚
    â”‚                               â”œâ”€ Intelligent-Tiering â”‚
    â”‚                               â”‚                      â”‚
    â”‚                               â””â”€â–º S3 Glacier         â”‚
    â”‚                                   (via lifecycle)    â”‚
    â”‚                                                      â”‚
    â”‚  Volume Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Amazon S3             â”‚
    â”‚                               â”‚                      â”‚
    â”‚                               â””â”€â–º EBS Snapshots      â”‚
    â”‚                                   (restore volumes)  â”‚
    â”‚                                                      â”‚
    â”‚  Tape Gateway â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º S3 Tape Library       â”‚
    â”‚                               (Active Tapes)         â”‚
    â”‚                               â”‚                      â”‚
    â”‚                               â””â”€â–º Tape Archive       â”‚
    â”‚                                   - Glacier          â”‚
    â”‚                                   - Glacier Deep     â”‚
    â”‚                                     Archive          â”‚
    â”‚                                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**Connection Methods:**
- **Internet:** HTTPS encrypted connection
- **Direct Connect:** Private connection to AWS (dedicated, higher bandwidth)

**Security:**
- âœ… All data encrypted in transit (HTTPS/TLS)
- âœ… All data encrypted at rest in AWS
- âœ… IAM role-based access control

---

# AWS Transfer Family

## Overview

**AWS Transfer Family** is a **fully managed service** for file transfers into/out of **Amazon S3** or **Amazon EFS** using **FTP protocols**.

### Supported Protocols

- âœ… **FTP** (File Transfer Protocol) - Unencrypted
- âœ… **FTPS** (FTP over SSL/TLS) - Encrypted
- âœ… **SFTP** (SSH File Transfer Protocol) - Encrypted, most secure

## Key Features

### Managed Infrastructure

- âœ… **Scalable** (auto-scales with demand)
- âœ… **Reliable** (SLA-backed)
- âœ… **Highly available** (Multi-AZ)
- âœ… No infrastructure to manage

### Pricing

- ğŸ’° **Per provisioned endpoint per hour** (hourly charge)
- ğŸ’° **Plus data transfer** (per GB transferred)

### Credential Management

- âœ… **Stores and manages credentials** within the service
- âœ… Integration options for authentication

### Authentication Integrations

**Supports multiple identity providers:**
- âœ… **Microsoft Active Directory** (AD)
- âœ… **LDAP** (Lightweight Directory Access Protocol)
- âœ… **Okta** (Identity provider)
- âœ… **Amazon Cognito** (AWS user pools)
- âœ… **Custom authentication** (Lambda function)

## Architecture

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚          FTP Clients (Users)                â”‚
    â”‚                                             â”‚
    â”‚  - FTP client                               â”‚
    â”‚  - FTPS client                              â”‚
    â”‚  - SFTP client                              â”‚
    â”‚  - Command-line tools                       â”‚
    â”‚  - GUI applications                         â”‚
    â”‚                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ FTP / FTPS / SFTP
                       â”‚
                       v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Route 53 (Optional)                         â”‚
    â”‚  - Custom domain (ftp.example.com)           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        AWS Transfer Family                   â”‚
    â”‚        (Within VPC)                          â”‚
    â”‚                                              â”‚
    â”‚  - SFTP Server                               â”‚
    â”‚  - FTPS Server                               â”‚
    â”‚  - FTP Server                                â”‚
    â”‚                                              â”‚
    â”‚  Authentication:                             â”‚
    â”‚  â”œâ”€ Microsoft Active Directory (LDAP)        â”‚
    â”‚  â”œâ”€ Okta                                     â”‚
    â”‚  â”œâ”€ Amazon Cognito                           â”‚
    â”‚  â””â”€ Custom (Lambda)                          â”‚
    â”‚                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                â”‚
               â”‚ Assumes        â”‚ Access
               â”‚ IAM Role       â”‚
               â”‚                â”‚
               v                v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Amazon S3    â”‚    â”‚ Amazon EFS   â”‚
    â”‚              â”‚    â”‚              â”‚
    â”‚ - Buckets    â”‚    â”‚ - File       â”‚
    â”‚ - Objects    â”‚    â”‚   Systems    â”‚
    â”‚              â”‚    â”‚              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Use Cases

### 1. Partner File Exchange
- Share files with business partners
- Partners use FTP/SFTP clients
- Secure, managed endpoint

### 2. Application Data Uploads
- Users upload data to your application
- Data lands in S3/EFS automatically
- No custom FTP server needed

### 3. Legacy Application Integration
- Support legacy systems using FTP
- Migrate from on-premises FTP servers
- Modernize without changing clients

### 4. Compliance & Auditing
- Built-in logging to CloudWatch
- Integration with CloudTrail
- Track all file operations

## Security Best Practices

âœ… **Use SFTP** (most secure, SSH-based)
âœ… **Use FTPS** (encrypted with SSL/TLS) if SFTP not possible
âŒ **Avoid FTP** (unencrypted, insecure)

âœ… **Use Active Directory** for centralized user management
âœ… **Enable MFA** when possible
âœ… **Use VPC endpoint** for private access
âœ… **Restrict by IP** using security groups

---

# AWS DataSync

## Overview

**AWS DataSync** is a service that **moves large amounts of data** between storage systems.

### Data Transfer Scenarios

#### 1. On-Premises/Other Cloud â†’ AWS
- **Requires an agent** (installed on-premises)
- Supports: NFS, SMB, HDFS, S3 API

#### 2. AWS â†’ AWS
- **No agent needed**
- Direct service-to-service transfer

## Supported Protocols & Sources

### On-Premises Sources

- âœ… **NFS** (Network File System)
- âœ… **SMB** (Server Message Block)
- âœ… **HDFS** (Hadoop Distributed File System)
- âœ… **S3 API** (Object storage)

### AWS Destinations

- âœ… **Amazon S3** (all storage classes, including Glacier)
- âœ… **Amazon EFS** (Elastic File System)
- âœ… **Amazon FSx** (Windows, Lustre, NetApp ONTAP, OpenZFS)

## Key Features

### Scheduled Replication

- âœ… **Hourly** replication
- âœ… **Daily** replication
- âœ… **Weekly** replication
- Automate data synchronization

### Metadata Preservation

- âœ… **File permissions** preserved
- âœ… **Metadata** preserved
- âœ… **NFS POSIX** permissions
- âœ… **SMB** permissions

### Performance

- âœ… Each agent task can use up to **10 Gbps**
- âœ… **Bandwidth limits** can be configured
- âœ… Incremental transfers (only changed data)

### Data Integrity

- âœ… **Verification** of data transfer
- âœ… **Checksum validation**
- âœ… Automatic retry on failure

## Architecture: On-Premises to AWS

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    On-Premises                       â”‚
    â”‚                                      â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚  â”‚ NFS Server         â”‚              â”‚
    â”‚  â”‚      or            â”‚              â”‚
    â”‚  â”‚ SMB Server         â”‚              â”‚
    â”‚  â”‚                    â”‚              â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
    â”‚             â”‚                        â”‚
    â”‚             â”‚ Read data              â”‚
    â”‚             â”‚                        â”‚
    â”‚             v                        â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚ AWS DataSync Agent           â”‚    â”‚
    â”‚  â”‚ (Installed on-premises)      â”‚    â”‚
    â”‚  â”‚                              â”‚    â”‚
    â”‚  â”‚ - Can run on AWS Snowcone    â”‚    â”‚
    â”‚  â”‚   (pre-installed)            â”‚    â”‚
    â”‚  â”‚                              â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚             â”‚                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”‚ TLS encrypted
                  â”‚ connection
                  â”‚
                  v
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         AWS Cloud                            â”‚
    â”‚                                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚ AWS DataSync                           â”‚  â”‚
    â”‚  â”‚ (Service in AWS Region)                â”‚  â”‚
    â”‚  â”‚                                        â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚             â”‚                                â”‚
    â”‚             â”‚ Write data                     â”‚
    â”‚             â”‚                                â”‚
    â”‚             v                                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚ Amazon S3                           â”‚    â”‚
    â”‚  â”‚ - S3 Standard                       â”‚    â”‚
    â”‚  â”‚ - S3 Intelligent-Tiering            â”‚    â”‚
    â”‚  â”‚ - S3 Standard-IA                    â”‚    â”‚
    â”‚  â”‚ - S3 One Zone-IA                    â”‚    â”‚
    â”‚  â”‚ - S3 Glacier                        â”‚    â”‚
    â”‚  â”‚ - S3 Glacier Deep Archive           â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚ Amazon EFS                          â”‚    â”‚
    â”‚  â”‚ (Elastic File System)               â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                              â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚ Amazon FSx                          â”‚    â”‚
    â”‚  â”‚ - FSx for Windows                   â”‚    â”‚
    â”‚  â”‚ - FSx for Lustre                    â”‚    â”‚
    â”‚  â”‚ - FSx for NetApp ONTAP              â”‚    â”‚
    â”‚  â”‚ - FSx for OpenZFS                   â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

**Note:** AWS DataSync Agent can run on **AWS Snowcone** with **pre-installed agent** for edge locations.

## Architecture: AWS to AWS Transfer

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              AWS Cloud                       â”‚
    â”‚                                              â”‚
    â”‚  Source:                                     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
    â”‚  â”‚ Amazon S3       â”‚                         â”‚
    â”‚  â”‚     or          â”‚                         â”‚
    â”‚  â”‚ Amazon EFS      â”‚                         â”‚
    â”‚  â”‚     or          â”‚                         â”‚
    â”‚  â”‚ Amazon FSx      â”‚                         â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
    â”‚           â”‚                                  â”‚
    â”‚           v                                  â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
    â”‚  â”‚ AWS DataSync            â”‚                 â”‚
    â”‚  â”‚ (No agent required)     â”‚                 â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
    â”‚           â”‚                                  â”‚
    â”‚           v                                  â”‚
    â”‚  Destination:                                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
    â”‚  â”‚ Amazon S3       â”‚                         â”‚
    â”‚  â”‚     or          â”‚                         â”‚
    â”‚  â”‚ Amazon EFS      â”‚                         â”‚
    â”‚  â”‚     or          â”‚                         â”‚
    â”‚  â”‚ Amazon FSx      â”‚                         â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
    â”‚                                              â”‚
    â”‚  - Data and metadata transferred            â”‚
    â”‚  - Bidirectional support                    â”‚
    â”‚  - No agent needed                          â”‚
    â”‚                                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

## Use Cases

### 1. Data Migration
- Migrate file servers to AWS
- Move data lakes to S3
- Cloud migration projects

### 2. Data Replication
- Disaster recovery
- Data distribution
- Multi-region copies

### 3. Data Archival
- Archive on-premises data to S3 Glacier
- Compliance and retention
- Cost optimization

### 4. Hybrid Workflows
- Sync on-premises and cloud
- Burst compute to cloud
- Data processing workflows

## Comparison: DataSync vs. Storage Gateway

| Feature | DataSync | Storage Gateway |
|---------|----------|-----------------|
| **Purpose** | One-time/scheduled migration | Ongoing hybrid access |
| **Use Case** | Migrate data to AWS | Hybrid storage solution |
| **Access Pattern** | Copy data | Real-time access |
| **Agent** | DataSync Agent | Storage Gateway VM |
| **Speed** | Up to 10 Gbps per task | Based on connection |
| **Best For** | Migrations, replication | Daily operations |

---

# Storage Comparison Summary

## Quick Reference Table

| Storage Type | Service | Use Case | Protocol/Interface | Performance |
|-------------|---------|----------|-------------------|-------------|
| **Object** | **S3** | General-purpose object storage | HTTP/HTTPS API | High throughput |
| **Object Archive** | **S3 Glacier** | Long-term archival | HTTP/HTTPS API | Retrieval: minutes to hours |
| **Block (Single Instance)** | **EBS volumes** | Network storage for one EC2 instance | Block device | High IOPS, low latency |
| **Block (Local)** | **Instance Store** | Physical storage for EC2 | Block device | Highest IOPS, ephemeral |
| **File (Linux)** | **EFS** | Network File System for Linux | NFS | Scalable, POSIX-compliant |
| **File (Windows)** | **FSx for Windows** | Network File System for Windows | SMB | Active Directory integration |
| **File (HPC)** | **FSx for Lustre** | High Performance Computing | Lustre protocol | Sub-ms latency, millions IOPS |
| **File (Multi-protocol)** | **FSx for NetApp ONTAP** | High OS compatibility | NFS, SMB, iSCSI | Enterprise features |
| **File (OpenZFS)** | **FSx for OpenZFS** | Managed ZFS file system | NFS | 1M IOPS, <0.5ms latency |
| **Hybrid (File)** | **Storage Gateway - File** | S3 & FSx File Gateway | NFS, SMB | Local cache + cloud |
| **Hybrid (Block)** | **Storage Gateway - Volume** | Volume Gateway (cache/stored) | iSCSI | Local cache/storage + cloud |
| **Hybrid (Tape)** | **Storage Gateway - Tape** | Tape Gateway | iSCSI VTL | Replace physical tapes |
| **FTP Interface** | **Transfer Family** | FTP, FTPS, SFTP on S3/EFS | FTP/FTPS/SFTP | Managed FTP service |
| **Data Migration** | **DataSync** | Schedule data sync | N/A (service) | Up to 10 Gbps per task |
| **Physical Transfer** | **Snowcone/Snowball/Snowmobile** | Physical transfer of large data | N/A (physical device) | Offline transfer, petabytes |

## Decision Tree

### For Compute Instances:

**Need block storage for EC2?**
- Persistent? â†’ **EBS**
- Ephemeral/highest IOPS? â†’ **Instance Store**

### For File Storage:

**What operating system?**
- Linux/POSIX? â†’ **EFS**
- Windows? â†’ **FSx for Windows**
- HPC/ML? â†’ **FSx for Lustre**
- Multi-protocol enterprise? â†’ **FSx for NetApp ONTAP**
- ZFS workloads? â†’ **FSx for OpenZFS**

### For Object Storage:

**What's the access pattern?**
- Frequent access? â†’ **S3 Standard**
- Infrequent access? â†’ **S3 Standard-IA** or **S3 One Zone-IA**
- Archive? â†’ **S3 Glacier** (various tiers)
- Unknown pattern? â†’ **S3 Intelligent-Tiering**

### For Hybrid (On-Premises + AWS):

**What type of access?**
- File shares? â†’ **Storage Gateway - File Gateway**
- Block storage? â†’ **Storage Gateway - Volume Gateway**
- Tape backup? â†’ **Storage Gateway - Tape Gateway**
- FTP uploads? â†’ **Transfer Family**
- Large migrations? â†’ **DataSync** or **Snowball**

### For Large Data Transfer:

**How much data?**
- < 10 TB + good network? â†’ **Direct upload** or **DataSync**
- 10-80 TB? â†’ **Snowcone** (8-14 TB) or **Snowball** (80 TB)
- 80 TB - 10 PB? â†’ **Snowball Edge**
- > 10 PB? â†’ **Snowmobile** (exabyte scale)

### For Database Workloads:

**What kind of database?**
- Use **managed database services** (RDS, DynamoDB, etc.) with:
  - **EBS** for block storage (RDS uses this)
  - **S3** for backups
  - **ElastiCache** for caching

---

**ğŸ“ Note:** This comprehensive guide covers AWS Snow Family, Amazon FSx, Storage Gateway, Transfer Family, DataSync, and complete storage comparison - essential for the AWS Solutions Architect certification exam and real-world hybrid storage architectures.
