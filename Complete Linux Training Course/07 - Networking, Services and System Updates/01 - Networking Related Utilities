# ðŸŒ Linux Networking Concepts - Complete Guide with Real-Life Examples

## 1. Internet Access to VM (VirtualBox)

**Concept:** VirtualBox Bridged Adapter mode allows your VM to get its own IP address from your router, making it appear as a separate physical device on your network.

**Real-Life Example:** Your home network is like an apartment building. Your router = Main building entrance. Your laptop = Apartment 1A. Your VM in NAT mode = A guest living in your apartment (shares your address). Your VM in Bridged mode = Separate apartment 1B (has its own address). When you use Bridged Adapter, your VM gets its own "apartment number" (IP address) from the building manager (router), so it can receive mail (internet traffic) directly.

**Steps to Configure:** 1. Open VirtualBox Manager. 2. Select your VM (must be powered off). 3. Click "Settings" button. 4. Click "Network" in left pane. 5. Under "Attached to:" select "Bridged Adapter". 6. Click OK. 7. Start your VM. 8. Test connection: ping google.com

**Use Cases:** Test web applications from other devices on your network. Allow other machines to connect to database in your VM. SSH to your VM from any device on same network. Run services (web servers, FTP) that need to be accessible from other machines.

## 2. Network Components

### 2.1 IP Address (Internet Protocol Address)

**Concept:** A unique numerical label assigned to every device on a network (like 192.168.1.100). It's how devices find and communicate with each other.

**Real-Life Example:** IP addresses are like home addresses. Your house: "123 Main Street" = 192.168.1.100. Neighbor's house: "124 Main Street" = 192.168.1.101. Google's house: "1600 Amphitheatre Parkway" = 8.8.8.8. Mail carriers use addresses to deliver packages; routers use IP addresses to deliver data packets.

**Office Network Example:** 192.168.1.1 = Router/Gateway, 192.168.1.10 = File Server, 192.168.1.20 = Web Server, 192.168.1.30 = Database Server, 192.168.1.50 = John's Laptop, 192.168.1.51 = Sarah's Desktop, 192.168.1.100 = Conference Room TV

**Commands:** ifconfig (view your IP address). ip addr show (modern way to view IP). ping 192.168.1.100 (check if device is online). ssh user@192.168.1.150 (SSH to remote server). curl http://192.168.1.100:8080 (access web application). curl ifconfig.me (find your public IP). nmap -sn 192.168.1.0/24 (scan network for active IPs). arp -a (view ARP table showing all IPs you've communicated with).

**Configure Static IP:** Edit /etc/sysconfig/network-scripts/ifcfg-eth0 with content: DEVICE=eth0, BOOTPROTO=static, IPADDR=192.168.1.100, NETMASK=255.255.255.0, GATEWAY=192.168.1.1, DNS1=8.8.8.8, ONBOOT=yes. Then run: systemctl restart network

**Use Cases:** Identify your machine on network. Check if printer is online (ping 192.168.1.200). SSH to production server. Access Jenkins at http://192.168.1.100:8080. Configure static IP for server so address never changes. Find all devices on office network.

### 2.2 Subnet Mask

**Concept:** Defines which part of IP is "network" (neighborhood) and which part is "host" (house number). Common masks: 255.255.255.0 = /24 = 254 usable hosts. 255.255.255.128 = /25 = 126 hosts. 255.255.0.0 = /16 = 65,534 hosts. 255.0.0.0 = /8 = 16,777,214 hosts.

**Real-Life Example:** Like dividing a city into districts. Small network (255.255.255.0): Street is "Main Street". Network is 192.168.1.0. Houses are 192.168.1.1 to 192.168.1.254 (same street). All houses on "Main Street" can talk directly to each other. To reach "Oak Street" (192.168.2.x), you need the city post office (gateway). Large network (255.255.0.0): City is "Springfield". Network is 192.168.0.0. Neighborhoods are 192.168.1.x, 192.168.2.x up to 192.168.254.x. All neighborhoods in "Springfield" can communicate directly. To reach "Shelbyville" (192.169.x.x), you need interstate highway (gateway).

**Commands:** ifconfig eth0 (view subnet mask). ip addr show eth0 (shows IP with CIDR notation like 192.168.1.50/24).

**Calculate Network Size:** Subnet 255.255.255.0 = /24. Host bits: 32 - 24 = 8. Total addresses: 2^8 = 256. Usable hosts: 256 - 2 = 254 (subtract network address and broadcast address). Subnet 255.255.255.128 = /25. Host bits: 7. Total: 128. Usable: 126.

**Determine if Two IPs are on Same Network:** IP1: 192.168.1.50 (subnet 255.255.255.0). IP2: 192.168.1.75 (subnet 255.255.255.0). Network part: 192.168.1.x. Result: SAME NETWORK - can communicate directly without router. IP1: 192.168.1.50 (subnet 255.255.255.0). IP3: 192.168.2.50 (subnet 255.255.255.0). Network parts: 192.168.1.x vs 192.168.2.x. Result: DIFFERENT NETWORKS - needs router/gateway.

**Office Network Planning Example:** Company has 3 departments. Sales (50 employees): Network 192.168.1.0/24, Subnet 255.255.255.0, IPs 192.168.1.1-254 (254 hosts), Gateway 192.168.1.1. Engineering (100 employees): Network 192.168.2.0/24, Subnet 255.255.255.0, IPs 192.168.2.1-254 (254 hosts), Gateway 192.168.2.1. HR (20 employees): Network 192.168.3.0/25, Subnet 255.255.255.128, IPs 192.168.3.1-126 (126 hosts), Gateway 192.168.3.1.

**Configure Subnet Mask:** Edit /etc/sysconfig/network-scripts/ifcfg-eth0 with: NETMASK=255.255.255.0 or using CIDR: PREFIX=24. Then run: systemctl restart network

**Subnet Calculation Table:** 255.255.255.252 = /30 = 2 hosts (Point-to-point links). 255.255.255.248 = /29 = 6 hosts (Small office). 255.255.255.240 = /28 = 14 hosts (Department). 255.255.255.224 = /27 = 30 hosts (Small branch). 255.255.255.192 = /26 = 62 hosts (Medium branch). 255.255.255.128 = /25 = 126 hosts (Large branch). 255.255.255.0 = /24 = 254 hosts (Standard LAN). 255.255.0.0 = /16 = 65,534 hosts (Large campus).

**Troubleshooting:** If you can't ping device on same physical network, check subnet mismatch. Device A: 192.168.1.50, Subnet 255.255.255.0. Device B: 192.168.1.150, Subnet 255.255.255.128. Device A thinks B is on same network but Device B thinks it's on different network. Result: Communication fails. Fix: Use same subnet mask on both devices.

### 2.3 Gateway (Default Gateway)

**Concept:** The "exit door" of your network. It's the router that forwards traffic from your local network to external networks (like the internet). Think of it as the bridge between your local network and the outside world.

**Real-Life Example:** Gateway is the main entrance/exit of your apartment building. You (192.168.1.50) want to send a letter to Google (8.8.8.8). You can't deliver it yourself (different network). You give it to the building manager (gateway at 192.168.1.1). The building manager knows how to route it to the postal service (internet). Communication flow: Your Computer (192.168.1.50) â†’ Gateway (192.168.1.1) â†’ ISP Router â†’ Internet â†’ Google (8.8.8.8).

**Commands:** route -n (view default gateway). ip route show (modern way, output shows: default via 192.168.1.1 dev eth0). netstat -rn (another way to view routes). ping 192.168.1.1 (test gateway connectivity - if this fails, you have no internet access). traceroute google.com (trace route to see path through gateway, shows: 1. 192.168.1.1 your gateway, 2. 10.0.0.1 ISP router, 3. Internet backbone, 15. 8.8.8.8 Google DNS). ip route add default via 192.168.1.1 (temporarily add gateway). ip route del default (delete default gateway).

**Configure Gateway:** Edit /etc/sysconfig/network-scripts/ifcfg-eth0 with: GATEWAY=192.168.1.1. Then run: systemctl restart network

**Multiple Gateway Scenario:** Server with two network connections: eth0: Internal network (Gateway: 10.0.0.1), eth1: Internet connection (Gateway: 203.0.113.1). Commands: ip route add 10.0.0.0/8 via 10.0.0.1 dev eth0 (internal traffic). ip route add default via 203.0.113.1 dev eth1 (internet traffic).

**Home Network Example:** Internet (ISP) â†’ Cable Modem (Public IP) â†’ Router/Gateway: 192.168.1.1 â†’ Your Laptop: 192.168.1.50 (Gateway: .1) and Smart TV: 192.168.1.100 (Gateway: .1). When you browse google.com: 1. Laptop sends packet to gateway (192.168.1.1). 2. Router forwards to ISP. 3. Internet routes to Google. 4. Response comes back same path.

**Gateway Failure Troubleshooting:** Symptom: Can ping local devices but not internet. Step 1: Check if gateway is reachable (ping 192.168.1.1 - if fails, gateway/router is down). Step 2: Check routing table (route -n - verify default gateway entry exists). Step 3: Check if gateway has internet (login to router admin panel or connect laptop directly to router and test). Step 4: DNS vs Gateway issue (ping 8.8.8.8 - if success, gateway works but DNS issue; if fails, gateway problem). Step 5: Check gateway configuration (ip route show - should show: default via 192.168.1.1 dev eth0). Fix: Delete and re-add default route (ip route del default, then ip route add default via 192.168.1.1 dev eth0).

**Gateway Priority (Metric):** If you have multiple gateways, use metric to set priority. Lower metric = higher priority. Primary gateway: ip route add default via 192.168.1.1 dev eth0 metric 100. Backup gateway: ip route add default via 192.168.1.2 dev eth1 metric 200. If primary gateway fails, traffic automatically uses backup.

### 2.4 Static vs. DHCP

**Concept:** DHCP (Dynamic Host Configuration Protocol) = Automatic IP assignment from DHCP server. Static IP = Manual IP configuration that never changes. DHCP Process: 1. DHCP Discover (client broadcasts "I need an IP"), 2. DHCP Offer (server responds "Here's an available IP"), 3. DHCP Request (client says "I'll take it"), 4. DHCP Acknowledge (server confirms "It's yours for X hours"). Static IP Process: Administrator manually configures IP settings and IP never changes unless manually changed.

**Real-Life Example:** DHCP is like a hotel: You check in, they assign you room 305. Tomorrow, you might get room 408. You don't care which room, just need a place to sleep. Easy, automatic, no hassle. Static IP is like owning a house: Your address is always "123 Main Street". Everyone knows where to find you. Your address never changes. Requires manual setup, but provides stability.

**Use DHCP for:** Laptops and mobile devices (change locations frequently). Guest devices on your network. Workstations that don't host services. Temporary devices. Home computers. IoT devices (sometimes - printers might need static). Advantages: No manual configuration needed, easy to add new devices, automatic network updates, prevents IP conflicts, centralized management. Disadvantages: IP can change (problematic for servers), depends on DHCP server availability, slightly slower network startup.

**Configure DHCP:** Edit /etc/sysconfig/network-scripts/ifcfg-eth0 with: DEVICE=eth0, BOOTPROTO=dhcp, ONBOOT=yes. Then run: systemctl restart network. dhclient -r (release current IP). dhclient eth0 (request new IP). cat /var/lib/dhclient/dhclient.lease (view DHCP lease information).

**Use Static IP for:** Servers (web, database, email, DNS, DHCP servers). Network equipment (routers, switches, firewalls). Printers and network-attached storage (NAS). Security cameras. VoIP phones. Any device people connect to by IP address. Advantages: IP never changes, no dependency on DHCP server, faster boot (no DHCP negotiation), easier for DNS configuration, required for servers hosting services. Disadvantages: Manual configuration required, risk of IP conflicts if not managed properly, more administrative overhead, must manually update if network changes.

**Configure Static IP:** Edit /etc/sysconfig/network-scripts/ifcfg-eth0 with: DEVICE=eth0, BOOTPROTO=static, ONBOOT=yes, IPADDR=192.168.1.100, NETMASK=255.255.255.0, GATEWAY=192.168.1.1, DNS1=8.8.8.8, DNS2=8.8.4.4. Then run: systemctl restart network

**Small Office Network Example:** Static IPs (Infrastructure): Router/Gateway 192.168.1.1, Network Printer 192.168.1.10, File Server 192.168.1.11, Security Camera 192.168.1.12, Wi-Fi Access Point 192.168.1.13. DHCP Pool (Workstations): 192.168.1.100-192.168.1.200 for employee laptops, guest devices, mobile phones. Advantages: Servers always at same IP (easy to find), employee devices get automatic configuration, no IP conflicts.

**Web Server Example:** Production Web Server Setup with Static IP: Server IP 203.0.113.50, Subnet 255.255.255.0, Gateway 203.0.113.1, DNS1 8.8.8.8, DNS2 8.8.4.4. DNS points domain to static IP: www.example.com â†’ 203.0.113.50. Why Static? IP must never change (DNS points to it), firewall rules configured for this IP, no dependency on DHCP server, faster network initialization.

**DHCP Reservation:** DHCP reservation = Device gets same IP via DHCP every time based on MAC address. Example: Network Printer with MAC 00:1A:2B:3C:4D:5E gets Reserved IP 192.168.1.50. DHCP Server config: host printer1 { hardware ethernet 00:1A:2B:3C:4D:5E; fixed-address 192.168.1.50; }. Advantages: IP never changes (like static), device still uses DHCP (automatic configuration), centrally managed from DHCP server, no manual configuration on device. Use for: Printers, network cameras, VoIP phones, access points.

### 2.5 Interface

**Concept:** A network interface is software representation of your network hardware (NIC). It's how the operating system communicates with network devices. Each interface has unique name and can be configured independently.

**Common Interface Names:** eth0, eth1, eth2 (Ethernet interfaces, older naming). ens33, ens192 (Ethernet interfaces, systemd naming). enp0s3, enp0s8 (Ethernet, PCI bus location naming). wlan0, wlp2s0 (Wireless interfaces). lo (Loopback interface, 127.0.0.1). bond0 (Bonded interface, multiple NICs combined). br0 (Bridge interface). virbr0 (Virtual bridge, used by KVM/libvirt).

**Real-Life Example:** Network interfaces are like doors to your house. eth0 = Front door (main entrance, wired connection). wlan0 = Back door (wireless connection). lo = Internal hallway (loopback, talking to yourself). bond0 = Double-wide door (two doors combined for redundancy). Each door (interface) can have its own address (IP), and you can choose which door to use for different purposes.

**Commands:** ifconfig (list all active interfaces). ifconfig -a (shows all interfaces including down/inactive). ip link show (modern way to list interfaces). ip addr show (shows interfaces with IP addresses). nmcli device status (NetworkManager way). ifconfig eth0 (view specific interface details). ethtool eth0 (detailed hardware info). ifconfig eth0 down (bring interface down/disable). ifconfig eth0 up (bring interface up/enable). ip link set eth0 down (modern way to disable). ip link set eth0 up (modern way to enable). ifdown eth0 (RHEL/CentOS way). ifup eth0 (RHEL/CentOS way). ip -s link show eth0 (view traffic statistics). iftop -i eth0 (interactive bandwidth monitor). nload eth0 (real-time traffic graph). nethogs eth0 (per-process bandwidth usage).

**Server with Multiple Interfaces Example:** Database Server: eth0 192.168.1.50 (Internal - Application traffic), eth1 10.0.0.50 (Backup network), lo 127.0.0.1 (Loopback - local connections). Routing table shows which interface for which traffic: 192.168.1.0/24 dev eth0 (app traffic), 10.0.0.0/24 dev eth1 (backup traffic).

**Configure Interface IP Temporary:** ifconfig eth0 192.168.1.100 netmask 255.255.255.0 up, or ip addr add 192.168.1.100/24 dev eth0. Permanent: Edit /etc/sysconfig/network-scripts/ifcfg-eth0 with: DEVICE=eth0, BOOTPROTO=static, ONBOOT=yes, IPADDR=192.168.1.100, NETMASK=255.255.255.0, GATEWAY=192.168.1.1, DNS1=8.8.8.8. Then run: systemctl restart network.

**Multiple IPs on Single Interface:** ifconfig eth0:0 192.168.1.101 netmask 255.255.255.0 up. ifconfig eth0:1 192.168.1.102 netmask 255.255.255.0 up. or using ip command: ip addr add 192.168.1.101/24 dev eth0. ip addr add 192.168.1.102/24 dev eth0. Verify: ip addr show eth0. Use case: Web server hosting multiple websites.

### 2.6 Interface MAC Address

**Concept:** A MAC (Media Access Control) address is unique hardware identifier permanently assigned to every network interface card (NIC). Format: 48-bit address (6 bytes), written as 00:0C:29:6D:80:1F. First 3 bytes = Manufacturer ID, Last 3 bytes = Device ID. Examples: 00:0C:29 = VMware Inc, 00:50:56 = VMware Inc, 08:00:27 = Oracle VirtualBox, DC:A6:32 = Raspberry Pi Foundation.

**Real-Life Example:** Think of MAC addresses like vehicle VIN numbers. IP Address = License plate (can change when you move states). MAC Address = VIN number (permanently etched into vehicle, never changes). When you move to new city (network), your license plate (IP) changes, but your VIN (MAC) stays the same.

**Commands:** ifconfig eth0 (view MAC, shows: ether 00:0c:29:6d:80:1f). ip link show eth0 (shows: link/ether 00:0c:29:6d:80:1f). ip link show | grep ether (view all MACs). cat /sys/class/net/eth0/address (shows: 00:0c:29:6d:80:1f).

**Change MAC Address Temporarily:** ip link set dev eth0 down. ip link set dev eth0 address 00:11:22:33:44:55. ip link set dev eth0 up. Verify: ip link show eth0. Why change MAC? Bypass MAC filtering, testing, privacy (MAC reveals manufacturer), clone router's MAC for ISP authentication.

**Find Device by MAC Address:** arp -a (view ARP table showing IP to MAC mappings). arp | grep "00:1a:2b:3c:4d:5e" (find specific MAC). arp -s 192.168.1.100 00:11:22:33:44:55 (add static ARP entry). arp -d 192.168.1.100 (delete ARP entry).

**MAC Address Filtering Example:** Wi-Fi Router only allows specific devices. Allowed Devices: John's Laptop 00:1A:2B:3C:4D:5E, Sarah's Phone 00:11:22:33:44:55, Office Printer 00:AA:BB:CC:DD:EE. Router Configuration uses whitelist: 00:1A:2B:3C:4D:5E Allow, 00:11:22:33:44:55 Allow, 00:AA:BB:CC:DD:EE Allow, ALL_OTHERS Deny.

## 3. Network Files and Commands

### Interface Detection

**Commands to detect network interfaces:** lspci | grep -i ethernet (list PCI network cards). lshw -class network (detailed hardware info). ip link show (list all network interfaces). ifconfig -a (list all interfaces including inactive). nmcli device status (NetworkManager device status). ls /sys/class/net/ (list all network interface names). dmesg | grep eth (kernel messages about ethernet). cat /proc/net/dev (network device statistics).

### Assigning an IP Address

**Temporary (lost after reboot):** ifconfig eth0 192.168.1.100 netmask 255.255.255.0 up. ip addr add 192.168.1.100/24 dev eth0. ip link set eth0 up.

**Permanent RHEL/CentOS:** Edit /etc/sysconfig/network-scripts/ifcfg-eth0 with: DEVICE=eth0, BOOTPROTO=static, ONBOOT=yes, IPADDR=192.168.1.100, NETMASK=255.255.255.0, GATEWAY=192.168.1.1, DNS1=8.8.8.8, DNS2=8.8.4.4. Then restart network: systemctl restart network or ifup eth0

**Permanent Ubuntu/Debian Netplan:** Edit /etc/netplan/01-netcfg.yaml with: network:, version: 2, renderer: networkd, ethernets:, eth0:, dhcp4: no, addresses:, - 192.168.1.100/24, gateway4: 192.168.1.1, nameservers:, addresses: [8.8.8.8, 8.8.4.4]. Then apply: netplan apply

### Interface Configuration Files

**/etc/nsswitch.conf** Purpose: Name Service Switch configuration file. Determines order and sources for system databases. Example content: hosts: files dns (check /etc/hosts first, then DNS). passwd: files (user info from /etc/passwd). group: files (group info from /etc/group). Use case: Control hostname resolution order.

**/etc/hostname** Purpose: Contains system's hostname. View: cat /etc/hostname. Set temporarily: hostname webserver01. Set permanently: hostnamectl set-hostname webserver01 or echo "webserver01" > /etc/hostname. Use case: Set server name.

**/etc/sysconfig/network** Purpose: Global network settings (RHEL/CentOS older versions). Example content: NETWORKING=yes, HOSTNAME=webserver01, GATEWAY=192.168.1.1. Use case: Set global gateway for all interfaces.

**/etc/sysconfig/network-scripts/ifcfg-nic** Purpose: Interface-specific configuration (RHEL/CentOS). One file per interface. Example /etc/sysconfig/network-scripts/ifcfg-eth0: DEVICE=eth0, TYPE=Ethernet, BOOTPROTO=static, ONBOOT=yes, IPADDR=192.168.1.100, NETMASK=255.255.255.0, GATEWAY=192.168.1.1, DNS1=8.8.8.8, DNS2=8.8.4.4, HWADDR=00:0C:29:6D:80:1F. For DHCP: DEVICE=eth0, BOOTPROTO=dhcp, ONBOOT=yes. Use case: Configure static IP for web server.

**/etc/resolv.conf** Purpose: DNS resolver configuration. Lists DNS servers to query. Example content: nameserver 8.8.8.8, nameserver 8.8.4.4, search company.local, domain company.local. View: cat /etc/resolv.conf. Manually edit (temporary): echo "nameserver 1.1.1.1" >> /etc/resolv.conf. Permanent RHEL/CentOS: Set DNS1 and DNS2 in /etc/sysconfig/network-scripts/ifcfg-eth0. Use case: Change DNS servers.

### Network Commands

**ping** Purpose: Test network connectivity. Usage: ping 192.168.1.1 (test gateway). ping google.com (test internet). ping -c 5 192.168.1.100 (send only 5 packets). ping -i 2 192.168.1.50 (ping every 2 seconds). ping -s 1000 192.168.1.1 (send 1000-byte packets). Use cases: Check if host is online. Test internet connectivity. Measure latency. Troubleshoot packet loss.

**ifconfig** Purpose: Configure and display network interfaces. Usage: ifconfig (show all active interfaces). ifconfig -a (show all interfaces including down). ifconfig eth0 (show specific interface). ifconfig eth0 up (enable interface). ifconfig eth0 down (disable interface). ifconfig eth0 192.168.1.100 netmask 255.255.255.0 (assign IP). ifconfig eth0 mtu 9000 (set MTU).

**ifup / ifdown** Purpose: Bring interface up or down (RHEL/CentOS). Usage: ifup eth0 (activate interface using config). ifdown eth0 (deactivate interface). Use cases: Restart interface after configuration change. Disable interface without removing config.

**netstat** Purpose: Network statistics. Usage: netstat -i (interface statistics). netstat -r (routing table). netstat -tuln (show all listening ports). netstat -tunap (show all connections with process IDs). netstat -s (protocol statistics). Use cases: Check listening ports. Find which process using port 80. View active connections.

**tcpdump** Purpose: Packet capture and network traffic analysis. Usage: tcpdump -i eth0 (capture all traffic). tcpdump -i eth0 host 192.168.1.100 (capture traffic to/from specific host). tcpdump -i eth0 port 80 (capture HTTP traffic). tcpdump -i eth0 port 22 (capture SSH traffic). tcpdump -i eth0 -w /tmp/capture.pcap (save to file). tcpdump -r /tmp/capture.pcap (read from file). tcpdump -i eth0 icmp (capture ping traffic). Use cases: Troubleshoot connectivity. Verify firewall rules. Analyze application behavior. Debug network protocols.

**Additional Useful Commands:** traceroute google.com (trace route to destination). route -n (display routing table). ip route show (modern way to show routes). arp -a (view ARP cache). nslookup google.com (DNS lookup). dig google.com (detailed DNS query). host google.com (simple DNS lookup). ss -tuln (modern replacement for netstat). nc -zv 192.168.1.100 80 (test if port 80 is open). curl -I http://192.168.1.100 (test HTTP connectivity). mtr google.com (combination of ping and traceroute). iftop -i eth0 (real-time bandwidth usage). nload eth0 (real-time bandwidth graph). nethogs eth0 (bandwidth usage per process).

## 4. NIC Information

### NIC = Network Interface Card

**Concept:** Physical or virtual hardware that connects computer to network. It's the actual network adapter (ethernet port or WiFi card).

**Real-Life Example:** NIC is like the mailbox on your house. It's where network data (mail) arrives and departs. Without a mailbox (NIC), you can't send or receive mail (network traffic).

**Example Interface Names:** ethtool enp0s3 (en = ethernet, p0 = PCI bus 0, s3 = slot 3). Logical name used by system.

### Other NICs

**lo (Loopback Interface)** Purpose: Special interface for computer to communicate with itself. IP Address: Always 127.0.0.1. Hostname: localhost. Commands: ping localhost (test if TCP/IP stack is working). ping 127.0.0.1. curl http://localhost:8080 (access local web server). Use cases: Test if network stack is functioning. Connect to local database. Run local web server during development. Troubleshoot applications without network. Example: Web developer runs Apache on localhost:80. Browser connects to http://localhost to test website locally.

**virbr0 (Virtual Bridge 0)** Purpose: Virtual bridge interface used by KVM/libvirt for NAT. Created automatically when libvirt is installed. Virtual environments use it to connect to outside network. Typical IP: 192.168.122.1. Commands: ifconfig virbr0 (view virtual bridge). brctl show (show all bridges). virsh net-list (list libvirt virtual networks). Use cases: Provide internet to virtual machines. NAT for VM traffic. Isolated network for VMs. DHCP for VMs. Example: You run KVM virtual machine. VM gets IP 192.168.122.100 from virbr0. VM can access internet through NAT via virbr0. How it works: VM sends packet to virbr0 (192.168.122.1). virbr0 NATs packet to use host's IP. Packet goes to internet. Response comes back, virbr0 forwards to VM.

### NIC Commands

**lspci | grep -i ethernet** (list physical network cards). Example output: 02:00.0 Ethernet controller: Intel Corporation 82545EM Gigabit Ethernet Controller

**ethtool eth0** (detailed NIC information). Example output: Speed: 1000Mb/s, Duplex: Full, Link detected: yes, Auto-negotiation: on. Use case: Verify link speed. Check if cable is connected. Troubleshoot duplex mismatch.

**ip link show** (show all network interfaces). **ifconfig -a** (show all interfaces with details). **nmcli device status** (NetworkManager status).

**View NIC statistics:** ifconfig eth0 (shows RX/TX packets, errors). ip -s link show eth0 (detailed statistics). ethtool -S eth0 (driver-specific statistics).

## 5. NIC Bonding

### Concept

NIC bonding (Network bonding) = Aggregation or combination of multiple NIC into single bond interface. Main purpose: Provide high availability and redundancy.

**Real-Life Example:** Like having multiple doors to your house. If front door (NIC1) gets blocked or broken, you can still enter/exit through back door (NIC2). Or both doors can be used simultaneously to move furniture faster (increased bandwidth).

### Bonding Diagram
nic1 (eth0) + nic2 (eth1) = bond0
Two NICs combined into one logical interface


### Bonding Modes

**Mode 0: balance-rr (Round-Robin)** Packets transmitted sequentially from first to last NIC. Provides load balancing and fault tolerance. Use case: General purpose with load balancing. Example: Packet 1 goes through eth0, Packet 2 through eth1, Packet 3 through eth0. Bandwidth: 2 NICs Ã— 1Gbps = 2Gbps.

**Mode 1: active-backup (Active-Backup)** Only ONE NIC is active. If active NIC fails, backup NIC takes over immediately. Most common mode. Use case: Redundancy/High Availability without switch configuration. Example: eth0 is active handling all traffic. eth0 fails â†’ eth1 becomes active within seconds. Bandwidth: 1Gbps (only one NIC active at a time). Advantage: Works with any switch, no special configuration needed.

**Mode 2: balance-xor (XOR Load Balancing)** Uses XOR formula based on source/destination MAC/IP to select NIC. Same source-destination pair always uses same NIC. Use case: Load balancing with better distribution. Example: Traffic to 192.168.1.100 always uses eth0. Traffic to 192.168.1.101 always uses eth1.

**Mode 3: broadcast** Transmits everything on all NICs simultaneously. Use case: Fault tolerance (rarely used due to inefficiency). Bandwidth: No increase (same data sent multiple times).

**Mode 4: 802.3ad (LACP - Link Aggregation)** Dynamic link aggregation using IEEE 802.3ad standard. Creates aggregation groups sharing same speed/duplex. Requires switch support. Use case: Maximum throughput with redundancy (enterprise networks). Example: Two 1Gbps NICs = 2Gbps bandwidth. If one NIC fails, still have 1Gbps. Requirement: Switch must support and be configured for LACP.

**Mode 5: balance-tlb (Transmit Load Balancing)** Outgoing traffic distributed across NICs. Incoming traffic received on one NIC. No switch configuration required. Use case: Outbound-heavy workloads (web servers, backup servers).

**Mode 6: balance-alb (Adaptive Load Balancing)** Transmit and receive load balancing. Doesn't require switch support. Use case: Best general-purpose bonding without switch configuration. Advantage: Load balancing in both directions without special switch config.

### Bonding Benefits

**High Availability:** If one NIC fails, traffic automatically fails over to other NIC(s). No downtime. Example: Database server with Mode 1. Primary NIC fails at 3 AM. Backup NIC takes over in 2 seconds. Database stays online.

**Redundancy:** Multiple paths to network. Single point of failure eliminated. Example: Cable gets unplugged or damaged. Server stays connected via second NIC.

**Link Aggregation (Increased Bandwidth):** Combine bandwidth of multiple NICs. Example: Two 1Gbps NICs in Mode 4 (LACP) = 2Gbps total bandwidth. Use case: File server serving many clients simultaneously.

### When to Use NIC Bonding

**Critical Servers:** Database servers (cannot afford downtime). Web servers (high availability required). Email servers (must be always accessible). File servers (need high throughput and redundancy).

**High Bandwidth Requirements:** Video streaming servers. Backup servers. Storage servers. VM host servers.

**Mission-Critical Applications:** Payment processing systems. Hospital medical record systems. Stock trading platforms. Emergency services systems.

### Real-World Scenarios

**Scenario 1: Active-Backup for Database Server** Setup: Database server with 2 NICs in Mode 1. Configuration: eth0: 192.168.1.50 (active), eth1: 192.168.1.50 (backup, same IP), bond0: 192.168.1.50. Normal operation: All traffic uses eth0. Failure scenario: Network cable on eth0 unplugged. Result: Within 2 seconds, eth1 becomes active. Database clients continue working without interruption.

**Scenario 2: LACP for High-Traffic Web Server** Setup: Web server with 2 NICs in Mode 4 (802.3ad LACP). Configuration: eth0: Part of bond0, eth1: Part of bond0, bond0: 192.168.1.100, Switch: Configured for LACP. Benefits: 2Gbps total bandwidth, Load distributed across both NICs, If one NIC fails still have 1Gbps, Handles 1000 concurrent users smoothly.

## 6. NIC Bonding Configuration Procedure

### Bonding Commands

**modprobe bonding** Purpose: Load bonding kernel module. Usage: modprobe bonding. Verify: lsmod | grep bonding. This must be done before creating bond interfaces.

**modinfo bonding** Purpose: Show bonding module information and available parameters. Usage: modinfo bonding. Output shows: Available bonding modes (0-6), parameters (mode, miimon, etc.), author, license.

### Configuration Files for Bonding

**Create bond0 interface configuration:** File: /etc/sysconfig/network-scripts/ifcfg-bond0. Content: DEVICE=bond0, TYPE=Bond, NAME=bond0, BONDING_MASTER=yes, BOOTPROTO=static, IPADDR=192.168.1.100, NETMASK=255.255.255.0, GATEWAY=192.168.1.1, DNS1=8.8.8.8, ONBOOT=yes, BONDING_OPTS="mode=1 miimon=100". mode=1 = Active-backup mode. miimon=100 = Link monitoring every 100ms.

**Edit eth0 (slave NIC 1):** File: /etc/sysconfig/network-scripts/ifcfg-eth0. Content: DEVICE=eth0, TYPE=Ethernet, BOOTPROTO=none, ONBOOT=yes, MASTER=bond0, SLAVE=yes.

**Edit eth1 (slave NIC 2):** File: /etc/sysconfig/network-scripts/ifcfg-eth1. Content: DEVICE=eth1, TYPE=Ethernet, BOOTPROTO=none, ONBOOT=yes, MASTER=bond0, SLAVE=yes.

### Step-by-Step Bonding Setup

**Step 1:** Install required packages: yum install -y kernel-module-bonding

**Step 2:** Load bonding module: modprobe bonding, then verify: lsmod | grep bonding

**Step 3:** Create bond0 configuration file: vi /etc/sysconfig/network-scripts/ifcfg-bond0, add content shown above.

**Step 4:** Edit eth0 configuration: vi /etc/sysconfig/network-scripts/ifcfg-eth0, add content shown above.

**Step 5:** Edit eth1 configuration: vi /etc/sysconfig/network-scripts/ifcfg-eth1, add content shown above.

**Step 6:** Restart network service: systemctl restart network or service network restart

**Step 7:** Verify bonding: cat /proc/net/bonding/bond0 (shows bonding status, active slave, mode). ifconfig bond0 (verify bond0 has IP address). ip addr show bond0 (modern way). ping 192.168.1.1 (test connectivity through bond).

**Step 8:** Test failover: ifconfig eth0 down (disable active NIC). cat /proc/net/bonding/bond0 (verify eth1 is now active). ping 192.168.1.1 (verify connectivity still works). ifconfig eth0 up (bring eth0 back up).

### Bonding Status Commands

**cat /proc/net/bonding/bond0** Shows: Bonding Mode (active-backup, 802.3ad, etc.), Primary Slave, Currently Active Slave, MII Status (up/down), Link Failure Count, Slave Interface (eth0, eth1), MII Status per slave, Speed, Duplex, Link Failure Count per slave.

**ifconfig bond0** Shows: bond0 IP address, netmask, MAC address, TX/RX packets.

**ethtool bond0** Shows: Link detected, Speed, Duplex.

**ip link show bond0** Shows: bond0 status, MAC address, master/slave relationships.

### Troubleshooting Bonding

**Problem: bond0 not showing up** Solution: Check if bonding module loaded (lsmod | grep bonding). If not loaded, run: modprobe bonding. Verify configuration files syntax. Restart network: systemctl restart network.

**Problem: Only one NIC working** Solution: Check bonding mode in /proc/net/bonding/bond0. If Mode 1 (active-backup), this is normal behavior. If Mode 4 (LACP), check switch configuration.

**Problem: Failover not working** Solution: Check miimon value in BONDING_OPTS. Recommended: miimon=100. Verify both NICs are up: ip link show. Check bonding status: cat /proc/net/bonding/bond0. Test manually: ifconfig eth0 down, then check if eth1 becomes active.

**Problem: LACP not working** Solution: Verify switch supports LACP. Configure switch ports for LACP. Check bonding mode is 4: cat /proc/net/bonding/bond0 | grep "Bonding Mode". Verify switch and server negotiating: ethtool eth0, ethtool eth1.

### Complete Working Example

**Goal:** Create bond0 with 2 NICs in active-backup mode for database server.

**Configuration:** bond0 IP: 10.0.0.50/24, Gateway: 10.0.0.1, DNS: 8.8.8.8, Mode: 1 (active-backup), NICs: eth0 and eth1.

**Step-by-step:**

1. Load bonding module: modprobe bonding

2. Create /etc/sysconfig/network-scripts/ifcfg-bond0: DEVICE=bond0, TYPE=Bond, NAME=bond0, BONDING_MASTER=yes, BOOTPROTO=static, IPADDR=10.0.0.50, NETMASK=255.255.255.0, GATEWAY=10.0.0.1, DNS1=8.8.8.8, ONBOOT=yes, BONDING_OPTS="mode=1 miimon=100"

3. Create /etc/sysconfig/network-scripts/ifcfg-eth0: DEVICE=eth0, TYPE=Ethernet, BOOTPROTO=none, ONBOOT=yes, MASTER=bond0, SLAVE=yes

4. Create /etc/sysconfig/network-scripts/ifcfg-eth1: DEVICE=eth1, TYPE=Ethernet, BOOTPROTO=none, ONBOOT=yes, MASTER=bond0, SLAVE=yes

5. Restart network: systemctl restart network

6. Verify: cat /proc/net/bonding/bond0, ifconfig bond0, ping 10.0.0.1

7. Test failover: ifconfig eth0 down, wait 2 seconds, cat /proc/net/bonding/bond0 (should show eth1 as Currently Active Slave), ping 10.0.0.1 (should still work), ifconfig eth0 up

**Result:** Database server has redundant network connectivity. If primary NIC fails, automatic failover to backup NIC within 2 seconds. No database downtime. Continuous operation.

---

## Summary

This guide covered all essential Linux networking concepts: VirtualBox bridged networking for VM internet access. Network components (IP address, subnet mask, gateway, static vs DHCP, interface, MAC address). Network configuration files (/etc/nsswitch.conf, /etc/hostname, /etc/sysconfig/network-scripts/ifcfg-nic, /etc/resolv.conf). Network commands (ping, ifconfig, ifup/ifdown, netstat, tcpdump). NIC information (physical and virtual interfaces like lo and virbr0). NIC bonding for high availability and redundancy with multiple bonding modes. Complete bonding configuration procedure with real-world examples.
All concepts explained with real-life examples for easy understanding. All commands provided with practical use cases. Ready to implement in production environments.

# New Network Utilities - NetworkManager

## What we will learn in this lecture

- Getting started with NetworkManager
- Network configuration methods:
  - nmtui
  - nmcli
  - nm-connection-editor
  - GNOME Settings

---

## Getting started with NetworkManager

**What is NetworkManager?**

NetworkManager is a service that provides set of tools designed specifically to make it easier to manage the networking configuration on Linux systems and is the default network management service on RHEL 8.

**Key Features:**
- Makes network management easier
- Provides easy setup of connection to the user
- NetworkManager offers management through different tools such as GUI, nmtui, and nmcli
- Default network management service on RHEL 8 and modern Linux distributions
- Automatically manages network connections
- Handles wired, wireless, mobile broadband, and VPN connections
- Provides both command-line and graphical interfaces

**Benefits of NetworkManager:**
- Simplifies network configuration
- Automatically detects and connects to networks
- Easy switching between network profiles
- Integrated with desktop environments (GNOME, KDE)
- Supports dynamic network changes without manual intervention
- Provides consistent interface across different connection types

**NetworkManager Service Commands:**
systemctl status NetworkManager (check NetworkManager service status)
systemctl start NetworkManager (start NetworkManager service)
systemctl stop NetworkManager (stop NetworkManager service)
systemctl restart NetworkManager (restart NetworkManager service)
systemctl enable NetworkManager (enable NetworkManager to start at boot)
nmcli general status (check NetworkManager overall status)
nmcli networking on (enable networking)
nmcli networking off (disable networking)

---

## Network Configuration Methods

NetworkManager provides multiple ways to configure network settings, allowing users to choose the method that best suits their needs.

### 1. nmcli (Command Line Interface)

**What is nmcli?**

nmcli is short for network manager command line interface. This tool is useful when access to a graphical environment is not available and can also be used within scripts to make network configuration changes.

**Key Features:**
- Powerful command-line tool for NetworkManager
- Can be used in scripts for automation
- Works over SSH connections
- No GUI required
- Full control over NetworkManager from terminal
- Supports tab completion for easier usage
- Can create, modify, delete, activate, and deactivate connections

**When to use nmcli:**
- Server environments without GUI
- Automation and scripting
- Remote administration via SSH
- Quick configuration changes
- Batch operations on multiple connections
- When GUI is not accessible

**Basic nmcli Commands:**
nmcli device status (show all network devices and their status)
nmcli device show (detailed information about all devices)
nmcli device show enp0s3 (detailed information about specific device)
nmcli connection show (list all network connections)
nmcli connection show --active (show only active connections)
nmcli connection show "connection-name" (show details of specific connection)
nmcli general hostname (show system hostname)
nmcli general status (show NetworkManager status)
nmcli networking connectivity (check network connectivity)

**Advantages:**
- Fast and efficient
- Scriptable and automatable
- Works on headless servers
- Complete control over network settings
- Can be used in configuration management tools (Ansible, Puppet)

---

### 2. nmtui (Text User Interface)

**What is nmtui?**

nmtui is short for network manager text user interface. This tool can be run within any terminal window and allows changes to be made by making menu selections and entering data.

**Key Features:**
- Interactive menu-driven interface
- Easy to use compared to nmcli
- Works in terminal without GUI
- Visual representation in text mode
- Simple navigation with arrow keys and Enter
- No need to remember complex command syntax
- Suitable for users who prefer visual interface but don't have GUI

**When to use nmtui:**
- You need visual interface but don't have GUI
- You're not comfortable with command-line syntax
- You prefer menu-driven configuration
- You're making one-time configuration changes
- You want to quickly edit connection without remembering nmcli syntax

**nmtui Menu Options:**
1. Edit a connection (modify existing network connections)
2. Activate a connection (enable/disable network connections)
3. Set system hostname (change system hostname)

**How to use nmtui:**
nmtui (launch nmtui main menu)
nmtui edit (directly open edit connection screen)
nmtui connect (directly open activate connection screen)
nmtui hostname (directly open set hostname screen)

**Navigation in nmtui:**
- Use Arrow keys to navigate
- Use Tab to move between fields
- Use Space to select/deselect checkboxes
- Use Enter to confirm selections
- Use Esc to go back or cancel

**Advantages:**
- User-friendly interface
- Visual feedback
- Easier for beginners than nmcli
- No need to memorize commands
- Works over SSH
- Safer than directly editing config files

---

### 3. nm-connection-editor (Graphical Management Tool)

**What is nm-connection-editor?**

nm-connection-editor is a full graphical management tool providing access to most of the NetworkManager configuration options. It can only be accessed through the desktop or console.

**Key Features:**
- Complete graphical interface
- Access to all NetworkManager settings
- Easy point-and-click configuration
- Visual representation of all connection properties
- Supports all connection types (Ethernet, Wi-Fi, VPN, Bridge, Bond, VLAN, etc.)
- Real-time validation of input
- Advanced settings easily accessible

**When to use nm-connection-editor:**
- You have access to graphical desktop
- You need to configure advanced settings
- You prefer GUI over command-line
- You're configuring complex network setups (VPN, bonding, bridging)
- You want visual feedback of configuration
- You're not familiar with command-line tools

**How to launch nm-connection-editor:**
nm-connection-editor (launch from terminal)
Applications â†’ Settings â†’ Network Connections (from GNOME menu)
Click network icon in system tray â†’ Network Settings â†’ Click gear icon

**Features available in nm-connection-editor:**
- Configure IPv4/IPv6 addresses (static or DHCP)
- Set DNS servers
- Configure routing
- Set up VPN connections
- Configure Wi-Fi security (WPA, WPA2, WPA3)
- Create bridge and bond interfaces
- Configure VLAN tagging
- Set up PPPoE connections
- Configure mobile broadband
- Set connection priorities
- Configure firewall zones
- Set MAC address cloning

**Connection Types Supported:**
- Ethernet
- Wi-Fi
- Mobile Broadband (3G/4G/5G)
- VPN (OpenVPN, PPTP, L2TP, IPsec)
- DSL (PPPoE)
- Bridge
- Bond
- Team
- VLAN
- InfiniBand

**Advantages:**
- Most user-friendly option
- Visual configuration
- Comprehensive settings in one place
- Easy to understand interface
- Immediate feedback
- Supports drag-and-drop (for some settings)
- Built-in help and tooltips

---

### 4. GNOME Settings

**What is GNOME Settings?**

GNOME Settings is the network screen of the GNOME desktop settings application allows basic network management tasks to be performed.

**Key Features:**
- Simple and clean interface
- Integrated with GNOME desktop
- Quick access from system tray
- Basic network configuration
- Suitable for everyday network tasks
- Wi-Fi network switching
- VPN management
- Network status at a glance

**When to use GNOME Settings:**
- You need quick access to basic network settings
- You want to switch Wi-Fi networks
- You need to enable/disable network connections
- You want to see network status
- You're using GNOME desktop environment
- You don't need advanced configuration

**How to access GNOME Settings:**
Click on system tray network icon â†’ Settings
Applications â†’ Settings â†’ Network
Settings â†’ Network (from GNOME Settings app)
gnome-control-center network (from terminal)

**Features available in GNOME Settings:**
- View network status
- Connect/disconnect networks
- Switch between Wi-Fi networks
- View IP address and network details
- Enable/disable Wi-Fi
- Enable/disable network connections
- Configure basic IPv4/IPv6 settings
- Set DNS servers
- Manage VPN connections
- Set up proxy settings
- Configure wired connections

**Limitations:**
- Limited advanced options
- Cannot create complex configurations (bonding, bridging, VLAN)
- Less detailed than nm-connection-editor
- Focused on common use cases

**Advantages:**
- Quick and easy access
- Clean and simple interface
- Perfect for daily network management
- No learning curve
- Integrated with desktop notifications
- Shows connection quality (Wi-Fi signal strength)

---

## Comparison of Network Configuration Methods

**nmcli:**
- Best for: Automation, scripting, headless servers, remote administration
- Complexity: High (requires command knowledge)
- Speed: Very fast
- Accessibility: SSH, terminal
- Power: Full control over all settings

**nmtui:**
- Best for: Users who want visual interface without GUI, one-time configurations
- Complexity: Medium (menu-driven)
- Speed: Medium
- Accessibility: Terminal, SSH
- Power: Access to most common settings

**nm-connection-editor:**
- Best for: Desktop users, advanced configurations, comprehensive setup
- Complexity: Low (point-and-click)
- Speed: Medium
- Accessibility: Desktop GUI only
- Power: Full control with visual interface

**GNOME Settings:**
- Best for: Quick network tasks, daily usage, simple configurations
- Complexity: Very low (simplified interface)
- Speed: Fast for basic tasks
- Accessibility: GNOME desktop only
- Power: Basic settings only

---

## Manage Linux Networking

### Using nmcli to configure static IP

**Complete Step-by-Step Guide:**

**Step 1: Get the listing of network interfaces**
Command: nmcli device
Purpose: This command shows all network devices. Example output shows device name (enp0s3, lo), type (ethernet, loopback), state (connected, disconnected), and connection name.
Real-world example: You have a new server and need to find which network interface to configure. Running nmcli device shows enp0s3 is your ethernet interface.

**Step 2: Set static IP address**
Command: nmcli connection modify enp0s3 ipv4.addresses 10.253.1.211/24
Purpose: Sets IP address to 10.253.1.211 with subnet mask 255.255.255.0 (/24 means 24 bits for network, 8 bits for hosts).
Explanation: Replace enp0s3 with your interface name. Replace 10.253.1.211/24 with your desired IP and subnet. The /24 is CIDR notation for subnet mask.
Real-world example: Setting up web server that needs static IP 192.168.1.100. Command: nmcli connection modify eth0 ipv4.addresses 192.168.1.100/24

**Step 3: Set gateway**
Command: nmcli connection modify enp0s3 ipv4.gateway 10.253.1.1
Purpose: Sets default gateway to 10.253.1.1. Gateway is the router IP that connects your network to internet.
Explanation: Gateway acts as the exit door from your local network. All traffic to external networks goes through gateway.
Real-world example: Your office router is at 192.168.1.1. Command: nmcli connection modify eth0 ipv4.gateway 192.168.1.1

**Step 4: Set IP method to manual (static)**
Command: nmcli connection modify enp0s3 ipv4.method manual
Purpose: Tells NetworkManager to use manual (static) IP configuration instead of DHCP. Without this, system might try to get IP from DHCP server.
Explanation: ipv4.method options: auto (DHCP), manual (static), shared (share connection with other devices), link-local (auto-assign 169.254.x.x), disabled (no IPv4).
Real-world example: Server must have same IP always for DNS records and firewall rules, so use manual method.

**Step 5: Set DNS servers**
Command: nmcli connection modify enp0s3 ipv4.dns 8.8.8.8
Purpose: Sets Google's public DNS server (8.8.8.8). DNS translates domain names (google.com) to IP addresses.
Explanation: You can add multiple DNS servers: nmcli connection modify enp0s3 ipv4.dns "8.8.8.8 8.8.4.4". System tries first DNS, if fails, tries second.
Common DNS servers: Google (8.8.8.8 and 8.8.4.4), Cloudflare (1.1.1.1 and 1.0.0.1), OpenDNS (208.67.222.222 and 208.67.220.220).
Real-world example: Company has internal DNS server at 10.0.0.10 for internal domains, and Google DNS as backup: nmcli connection modify eth0 ipv4.dns "10.0.0.10 8.8.8.8"

**Step 6: Bring connection down and up**
Command: nmcli connection down enp0s3 && nmcli connection up enp0s3
Purpose: Restarts network connection to apply all changes. Connection must be restarted for changes to take effect.
Explanation: && ensures second command runs only if first succeeds. This prevents leaving network in down state if error occurs.
Alternative: systemctl restart NetworkManager (restarts entire NetworkManager service, affects all connections). ifdown enp0s3 && ifup enp0s3 (older method).
Real-world example: After changing IP on remote server via SSH, use && to ensure connection comes back up, otherwise you lose access.

**Step 7: Verify configuration**
Command: ip address show enp0s3
Purpose: Displays IP configuration of enp0s3 interface. Verify IP address, subnet mask, and that interface is UP.
Output shows: inet 10.253.1.211/24 (your IP), brd 10.253.1.255 (broadcast), scope global (globally routable), enp0s3 (interface name), state UP (interface is active).
Additional verification commands: nmcli device show enp0s3 (detailed NetworkManager info), ip route show (verify gateway is set), cat /etc/resolv.conf (verify DNS servers), ping 10.253.1.1 (test gateway connectivity), ping 8.8.8.8 (test internet connectivity), ping google.com (test DNS resolution).

**Complete Real-World Example:**
Scenario: Setting up database server with static IP 192.168.10.50, gateway 192.168.10.1, DNS 8.8.8.8.

nmcli device (identify interface, output shows: eth0)
nmcli connection modify eth0 ipv4.addresses 192.168.10.50/24
nmcli connection modify eth0 ipv4.gateway 192.168.10.1
nmcli connection modify eth0 ipv4.method manual
nmcli connection modify eth0 ipv4.dns 8.8.8.8
nmcli connection down eth0 && nmcli connection up eth0
ip address show eth0 (verify IP: 192.168.10.50)
ip route show (verify gateway: default via 192.168.10.1)
cat /etc/resolv.conf (verify DNS: nameserver 8.8.8.8)
ping 192.168.10.1 (test gateway: should succeed)
ping 8.8.8.8 (test internet: should succeed)
ping google.com (test DNS: should succeed)


Result: Database server now has permanent static IP 192.168.10.50. Applications can connect to database at this IP. IP won't change after reboot. DNS records can point to this IP. Firewall rules can be configured for this IP.

---

### Adding secondary static IP using nmcli

Sometimes you need multiple IP addresses on same network interface. This is called IP aliasing or secondary IP. Common use cases: hosting multiple websites on one server, running multiple services on different IPs, migrating from old IP to new IP gradually.

**Complete Step-by-Step Guide:**

**Step 1: Check device status**
Command: nmcli device status
Purpose: Verify interface is active and connected. Shows all network interfaces and their current state.
Output shows: DEVICE (enp0s3), TYPE (ethernet), STATE (connected), CONNECTION (enp0s3 or connection name).
Real-world example: Before adding secondary IP, verify primary IP is working. If interface shows "disconnected", you must fix primary connection first.

**Step 2: Show active connections**
Command: nmcli connection show --active
Purpose: Display currently active network connections. Confirms which connection profile is managing your interface.
Output shows: NAME (connection name), UUID (unique identifier), TYPE (ethernet), DEVICE (enp0s3).
Real-world example: Server has multiple connection profiles. This command shows which one is currently active so you modify correct profile.

**Step 3: Check current IP configuration**
Command: ifconfig
Purpose: Display current IP address and verify primary IP is configured correctly before adding secondary.
Output shows: enp0s3 interface with inet (IP address), netmask (subnet mask), broadcast address, MAC address (ether), RX/TX packets (traffic statistics).
Alternative commands: ip addr show (modern replacement for ifconfig), ip addr show enp0s3 (show specific interface).
Real-world example: Web server currently has 192.168.1.100. You're adding 10.0.0.211 as secondary IP for internal management network.

**Step 4: Add secondary IP address**
Command: nmcli connection modify enp0s3 +ipv4.addresses 10.0.0.211/24
Purpose: Adds secondary IP 10.0.0.211 with subnet /24 to existing connection. The + sign means ADD, not replace.
Important: Use +ipv4.addresses (with plus sign) to ADD secondary IP. Without plus sign, it REPLACES primary IP.
Explanation: /24 means subnet mask 255.255.255.0. Secondary IP can be on different subnet than primary IP.
Real-world example: Web server has primary IP 192.168.1.100 for public web traffic. Adding secondary IP 10.0.0.211 for private admin panel accessible only from internal network.
Multiple secondary IPs: nmcli connection modify enp0s3 +ipv4.addresses "10.0.0.211/24 10.0.0.212/24 10.0.0.213/24" (adds three secondary IPs).

**Step 5: Reload connection**
Command: nmcli connection reload
Purpose: Reloads all connection profiles from disk. Makes NetworkManager aware of configuration changes.
Explanation: This command reads configuration files again without restarting NetworkManager service. Faster than full service restart.
When to use: After manually editing connection files, after modifying connections with nmcli, before activating new configuration.

**Step 6: Restart system (apply changes)**
Command: systemctl reboot
Purpose: Reboots system to ensure all changes take effect and persist after reboot.
Explanation: While changes can sometimes be applied without reboot using nmcli connection down/up, reboot ensures all system components recognize new IP.
Alternative to reboot: nmcli connection down enp0s3 && nmcli connection up enp0s3 (restart just the network connection, faster than full reboot).
Real-world consideration: If you're connected via SSH to remote server, reboot means temporary loss of connection. Ensure physical access or remote console (IPMI, iLO) available in case network doesn't come back up.

**Step 7: Verify secondary IP is active**
Command: ip address show
Purpose: Verify both primary and secondary IPs are active on interface. This is final confirmation that configuration worked.
Expected output for enp0s3:

enp0s3: <BROADCAST,MULTICAST,UP,LOWER_UP>
inet 10.253.1.211/24 (primary IP)
inet 10.0.0.211/24 (secondary IP)

Both IPs should show "scope global" meaning they're routable. Interface should show state UP.

Additional verification commands:
ifconfig enp0s3 (older method, shows both IPs)
ip addr show enp0s3 (shows both IPs with detailed info)
nmcli device show enp0s3 (shows both IPs from NetworkManager perspective)
ping 10.0.0.211 (test secondary IP from another machine)
curl http://10.0.0.211 (if web server running, test via secondary IP)
ss -tuln (show which services listening on which IPs)


**Complete Real-World Example:**

Scenario: Web server currently has public IP 203.0.113.50 for website. Adding private IP 10.0.0.100 for internal admin panel that should not be accessible from internet.

Step 1: nmcli device status
Output: enp0s3, ethernet, connected, Web-Server-Connection
Step 2: nmcli connection show --active
Output: Web-Server-Connection, ethernet, enp0s3
Step 3: ifconfig
Output: inet 203.0.113.50, netmask 255.255.255.0
Step 4: nmcli connection modify enp0s3 +ipv4.addresses 10.0.0.100/24
Result: Secondary IP added to configuration
Step 5: nmcli connection reload
Result: Configuration reloaded
Step 6: nmcli connection down enp0s3 && nmcli connection up enp0s3
Result: Connection restarted (avoiding full reboot)
Step 7: ip address show enp0s3
Output:
inet 203.0.113.50/24 brd 203.0.113.255 scope global enp0s3
inet 10.0.0.100/24 brd 10.0.0.255 scope global enp0s3
Verification:
ping 203.0.113.50 (from internet, works)
ping 10.0.0.100 (from internal network, works)
ping 10.0.0.100 (from internet, fails - not routed)
Configure web server Apache:
<VirtualHost 203.0.113.50:80> - Public website
<VirtualHost 10.0.0.100:80> - Admin panel
Configure firewall:
firewall-cmd --add-source=10.0.0.0/24 --zone=trusted (allow internal network to admin panel)
firewall-cmd --remove-service=http --zone=public (block public access to admin panel IP)


Result: Web server now has two IPs. Public website accessible from internet via 203.0.113.50. Admin panel only accessible from internal network via 10.0.0.100. Improved security. Better traffic segregation.

**Use Cases for Secondary IPs:**

1. Multi-website hosting: Host multiple websites on one server, each with own IP (for SSL certificates before SNI).

2. Service segregation: Public services on one IP (80, 443), admin services on another IP (SSH, database admin).

3. Migration: Add new IP while keeping old IP active during migration period. Gradually move services to new IP.

4. Load balancing: Multiple IPs for DNS round-robin load balancing.

5. Network segregation: Public network IP and private management network IP on same physical interface.

6. Testing: Add temporary IP for testing without affecting production IP.

7. Licensing: Some software licenses tied to IP address, need multiple IPs for multiple licenses.

8. Virtual hosting: Multiple IPs for different virtual machines or containers on same physical host.

---

## Summary

NetworkManager provides flexible network management for Linux systems through multiple interfaces: nmcli (command-line, scriptable, powerful), nmtui (text-based menu, user-friendly), nm-connection-editor (full GUI, comprehensive), GNOME Settings (quick access, basic tasks).

Static IP configuration with nmcli: Get device list, set IP address, set gateway, set method to manual, set DNS, restart connection, verify configuration.

Secondary IP configuration with nmcli: Check device status, show active connections, verify current IP, add secondary IP using +ipv4.addresses, reload connection, restart, verify both IPs active.

Choose the right tool for your needs: nmcli for servers and automation, nmtui for interactive terminal work, nm-connection-editor for desktop configuration, GNOME Settings for quick daily tasks.

All methods manage the same underlying NetworkManager service, so changes made in one tool are visible in others. Configuration persists across reboots. NetworkManager automatically handles connection management, reconnection on failure, and integration with system services.

Practice these commands in lab environment before using on production servers. Always verify configuration after changes. Keep backup of working configuration. Document your network setup for future reference.
